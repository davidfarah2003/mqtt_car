{"ast":null,"code":"import { ref } from \"vue\";\nexport default {\n  name: \"Battery_detailed\",\n  props: ['canUpdate'],\n  emits: ['subscribeToFields', 'updateData'],\n  setup(props, _ref) {\n    let {\n      emit\n    } = _ref;\n    let dataObject = ref({});\n    let initialized = ref(false);\n    let requiredFields = {\n      \"Pack temp 1\": \"battery/pack_temp_1/*\",\n      \"Pack temp 2\": \"battery/pack_temp_2/*\",\n      \"Cell voltage 1\": \"battery/cell_voltage_1/*\",\n      \"Cell voltage 2\": \"battery/cell_voltage_2/*\",\n      \"Cell voltage 3\": \"battery/cell_voltage_3/*\",\n      \"Max Temp\": \"battery/bms_status/max_cell_temp\",\n      \"Max Volt\": \"battery/bms_status/max_cell_voltage\",\n      \"Min Volt\": \"battery/bms_status/min_cell_voltage\",\n      \"Pack voltage\": \"battery/pack_info/pack_voltage\",\n      \"Pack current\": \"battery/can_port_current_1/pack_current\",\n      \"Fan Duty\": \"battery/pack_info/fan_duty\"\n    };\n    emit(\"subscribeToFields\", requiredFields);\n    setInterval(() => {\n      if (props.canUpdate) {\n        emit(\"updateData\", requiredFields, dataObject);\n        if (!initialized.value) initialized.value = true;\n      }\n    }, 1000);\n    return {\n      dataObject,\n      initialized\n    };\n  }\n};","map":{"version":3,"mappings":"AAqDA,SAAQA,GAAG,QAAO,KAAK;AAEvB,eAAe;EACbC,IAAI,EAAE,kBAAkB;EACxBC,KAAK,EAAE,CAAC,WAAW,CAAC;EACpBC,KAAK,EAAE,CAAC,mBAAmB,EAAE,YAAY,CAAC;EAE1CC,KAAK,CAACF,KAAK,QAAU;IAAA,IAAR;MAACG;IAAI,CAAC;IACjB,IAAIC,UAAS,GAAIN,GAAG,CAAC,CAAC,CAAC;IACvB,IAAIO,WAAU,GAAIP,GAAG,CAAC,KAAK;IAE3B,IAAIQ,cAAa,GAAI;MACnB,aAAa,EAAE,uBAAuB;MACtC,aAAa,EAAE,uBAAuB;MACtC,gBAAgB,EAAE,0BAA0B;MAC5C,gBAAgB,EAAE,0BAA0B;MAC5C,gBAAgB,EAAE,0BAA0B;MAC5C,UAAU,EAAE,kCAAkC;MAC9C,UAAU,EAAE,qCAAqC;MACjD,UAAU,EAAE,qCAAqC;MACjD,cAAc,EAAE,gCAAgC;MAChD,cAAc,EAAE,yCAAyC;MACzD,UAAU,EAAE;IACd;IAEAH,IAAI,CAAC,mBAAmB,EAAEG,cAAc;IAExCC,WAAW,CAAE,MAAI;MACf,IAAIP,KAAK,CAACQ,SAAS,EAAE;QACnBL,IAAI,CAAC,YAAY,EAAEG,cAAc,EAAEF,UAAU;QAC7C,IAAG,CAACC,WAAW,CAACI,KAAK,EAAEJ,WAAW,CAACI,KAAI,GAAI,IAAG;MAChD;IACF,GAAI,IAAI;IAER,OAAO;MAACL,UAAU;MAAEC;IAAW;EACjC;AACF","names":["ref","name","props","emits","setup","emit","dataObject","initialized","requiredFields","setInterval","canUpdate","value"],"sourceRoot":"","sources":["/home/davidf/Desktop/SSB/ssb-interface-v2/src/components/Battery/Battery_detailed.vue"],"sourcesContent":["<template>\n  <span class=\"plugin\">\n    <h1>Battery Detailed View</h1>\n\n    <div class=\"global_info\" v-if=\"initialized\">\n      <h3>Pack voltage: {{dataObject[\"Pack voltage\"][0]}} {{dataObject[\"Pack voltage\"][1]}}</h3>\n      <h3>Pack current: {{dataObject[\"Pack current\"][0]}} {{dataObject[\"Pack current\"][1]}}</h3>\n      <h3>Fan Duty: {{dataObject[\"Fan Duty\"][0]}} {{dataObject[\"Fan Duty\"][1]}}</h3>\n\n    </div>\n\n    <div class=\"temps\">\n      <ul>\n        <li v-for=\"(values, fieldName) in dataObject['Pack temp 1']\">\n          <div>{{fieldName}}: </div>\n          <div>{{values[0]}} {{values[1]}}</div>\n        </li>\n      </ul>\n\n      <ul>\n        <li v-for=\"(values, fieldName) in dataObject['Pack temp 2']\">\n          <div>{{fieldName}}: </div>\n          <div>{{values[0]}} {{values[1]}}</div>\n        </li>\n      </ul>\n    </div>\n\n    <div class=\"voltage\">\n      <ul>\n        <li v-for=\"(values, fieldName) in dataObject['Cell voltage 1']\">\n          <div>{{fieldName}}: </div>\n          <div>{{values[0]}} {{values[1]}}</div>\n        </li>\n        <li v-for=\"(values, fieldName) in dataObject['Cell voltage 2']\">\n          <div>{{fieldName}}: </div>\n          <div>{{values[0]}} {{values[1]}}</div>\n        </li>\n      </ul>\n\n      <ul>\n        <li v-for=\"(values, fieldName) in dataObject['Cell voltage 3']\">\n          <div>{{fieldName}}: </div>\n          <div>{{values[0]}} {{values[1]}}</div>\n        </li>\n      </ul>\n    </div>\n\n  </span>\n\n\n</template>\n\n<script>\nimport {ref} from \"vue\";\n\nexport default {\n  name: \"Battery_detailed\",\n  props: ['canUpdate'],\n  emits: ['subscribeToFields', 'updateData'],\n\n  setup(props, {emit}) {\n    let dataObject = ref({})\n    let initialized = ref(false)\n\n    let requiredFields = {\n      \"Pack temp 1\": \"battery/pack_temp_1/*\",\n      \"Pack temp 2\": \"battery/pack_temp_2/*\",\n      \"Cell voltage 1\": \"battery/cell_voltage_1/*\",\n      \"Cell voltage 2\": \"battery/cell_voltage_2/*\",\n      \"Cell voltage 3\": \"battery/cell_voltage_3/*\",\n      \"Max Temp\": \"battery/bms_status/max_cell_temp\",\n      \"Max Volt\": \"battery/bms_status/max_cell_voltage\",\n      \"Min Volt\": \"battery/bms_status/min_cell_voltage\",\n      \"Pack voltage\": \"battery/pack_info/pack_voltage\",\n      \"Pack current\": \"battery/can_port_current_1/pack_current\",\n      \"Fan Duty\": \"battery/pack_info/fan_duty\",\n    }\n\n    emit(\"subscribeToFields\", requiredFields)\n\n    setInterval( ()=>{\n      if (props.canUpdate) {\n        emit(\"updateData\", requiredFields, dataObject)\n        if(!initialized.value) initialized.value = true\n      }\n    } , 1000)\n\n    return {dataObject, initialized}\n  }\n}\n</script>\n\n<style scoped>\n\nli {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 5px;\n}\n.plugin {\n  display: flex;\n  flex-flow: column;\n  gap: 2px;\n}\n\n.temps {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2px;\n}\n\n.voltage {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2px;\n}\n\nli div {\n  color: orange;\n}\n</style>"]},"metadata":{},"sourceType":"module"}