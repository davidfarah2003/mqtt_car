{"ast":null,"code":"import ConnectedView from \"@/views/ConnectedView\";\nimport { reactive, ref } from \"vue\";\nexport default {\n  name: \"Home\",\n  components: {\n    ConnectedView\n  },\n  setup: function () {\n    let subscribedTopics = ['Home']; //Array containing the subscribed topics for this component\n    const sensorData = reactive(new Map());\n    let dataCallBack = receivedData => {\n      const parsed = JSON.parse(receivedData);\n      try {\n        parsed.forEach(message => {\n          message[\"sensors\"].forEach(sensor => {\n            if (sensor[\"sensor_name\"] === undefined) {\n              throw new Error(\"Received JSON is not well formatted\");\n            }\n            sensorData.set(message[\"message_name\"] + \"/\" + sensor[\"sensor_name\"], sensor[\"value\"]);\n          });\n        });\n      } catch (err) {\n        console.log(err);\n      }\n      console.log(sensorData);\n    };\n    return {\n      subscribedTopics,\n      dataCallBack,\n      sensorData\n    };\n  }\n};","map":{"version":3,"mappings":"AAgBA,OAAOA,aAAY,MAAO,uBAAuB;AACjD,SAAQC,QAAQ,EAAEC,GAAG,QAAO,KAAK;AAEjC,eAAe;EACbC,IAAI,EAAE,MAAM;EACZC,UAAU,EAAE;IAACJ;EAAa,CAAC;EAG3BK,KAAK,EAAE,YAAY;IACjB,IAAIC,gBAAe,GAAI,CAAC,MAAM,CAAC,EAAE;IACjC,MAAMC,UAAS,GAAIN,QAAQ,CAAC,IAAIO,GAAG,EAAE;IAGrC,IAAIC,YAAW,GAAKC,YAAY,IAAK;MACnC,MAAMC,MAAK,GAAIC,IAAI,CAACC,KAAK,CAACH,YAAY;MAGtC,IAAI;QACFC,MAAM,CAACG,OAAO,CAAEC,OAAO,IAAG;UACxBA,OAAO,CAAC,SAAS,CAAC,CAACD,OAAO,CAAEE,MAAM,IAAK;YACrC,IAAGA,MAAM,CAAC,aAAa,MAAMC,SAAS,EAAE;cAAC,MAAM,IAAIC,KAAK,CAAC,qCAAqC,CAAC;YAAA;YAC/FX,UAAU,CAACY,GAAG,CAACJ,OAAO,CAAC,cAAc,IAAI,GAAE,GAAIC,MAAM,CAAC,aAAa,CAAC,EAAEA,MAAM,CAAC,OAAO,CAAC;UACvF,CAAC;QACH,CAAC;MACH,EACA,OAAOI,GAAG,EAAE;QACVC,OAAO,CAACC,GAAG,CAACF,GAAG;MACjB;MAEAC,OAAO,CAACC,GAAG,CAACf,UAAU;IAExB;IACA,OAAO;MAACD,gBAAgB;MAAEG,YAAY;MAAEF;IAAU;EACpD;AACF","names":["ConnectedView","reactive","ref","name","components","setup","subscribedTopics","sensorData","Map","dataCallBack","receivedData","parsed","JSON","parse","forEach","message","sensor","undefined","Error","set","err","console","log"],"sourceRoot":"","sources":["/home/davidf/Desktop/SSB/ssb-interface-v2/src/views/Home.vue"],"sourcesContent":["<template>\n  <section class=\"app-main\">\n\n    <connected-view  v-slot=\"data\" :subscribedTopics=\"subscribedTopics\" :dataCallBack=\"dataCallBack\">\n      <h1> Home </h1>\n      <h1 v-if=\"data.connected\">Connected</h1>\n      <h1 v-else>Disconnected</h1>\n\n      <h3>Data: {{sensorData.get(\"somseNamse/name\")}}</h3>\n      <h4>Subscribed topics: {{data.subscribedTopics}}</h4>\n    </connected-view>\n\n  </section>\n</template>\n\n<script>\nimport ConnectedView from \"@/views/ConnectedView\";\nimport {reactive, ref} from \"vue\";\n\nexport default {\n  name: \"Home\",\n  components: {ConnectedView},\n\n\n  setup: function () {\n    let subscribedTopics = ['Home']; //Array containing the subscribed topics for this component\n    const sensorData = reactive(new Map())\n\n\n    let dataCallBack = (receivedData) => {\n      const parsed = JSON.parse(receivedData)\n\n\n      try {\n        parsed.forEach((message)=>{\n          message[\"sensors\"].forEach((sensor) => {\n            if(sensor[\"sensor_name\"] === undefined) {throw new Error(\"Received JSON is not well formatted\")}\n            sensorData.set(message[\"message_name\"] + \"/\" + sensor[\"sensor_name\"], sensor[\"value\"])\n          })\n        })\n      }\n      catch (err) {\n        console.log(err)\n      }\n\n      console.log(sensorData)\n\n    }\n    return {subscribedTopics, dataCallBack, sensorData}\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>\n"]},"metadata":{},"sourceType":"module"}