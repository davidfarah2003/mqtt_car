{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive, computed, watch, onMounted, onBeforeUnmount, nextTick, withScopeId, pushScopeId, popScopeId, withDirectives, openBlock, createBlock, withKeys, createVNode, Transition, mergeProps, createCommentVNode, withModifiers, renderSlot, Fragment, renderList, vShow, resolveDynamicComponent, toHandlers, createSlots, withCtx, shallowReactive } from 'vue';\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nvar FOCUSABLE_ELEMENTS_QUERY = 'button:not([disabled]), ' + 'select:not([disabled]), ' + 'a[href]:not([disabled]), ' + 'area[href]:not([disabled]), ' + '[contentEditable=\"\"]:not([disabled]), ' + '[contentEditable=\"true\"]:not([disabled]), ' + '[contentEditable=\"TRUE\"]:not([disabled]), ' + 'textarea:not([disabled]), ' + 'iframe:not([disabled]), ' + 'input:not([disabled]), ' + 'summary:not([disabled]), ' + '[tabindex]:not([tabindex=\"-1\"])';\nvar isTabPressed = function isTabPressed(event) {\n  return event.key === 'Tab' || event.keyCode === 9;\n};\nvar querySelectorAll = function querySelectorAll(element, selector) {\n  return _toConsumableArray(element.querySelectorAll(selector) || []);\n};\nvar queryFocusableElements = function queryFocusableElements(element) {\n  return querySelectorAll(element, FOCUSABLE_ELEMENTS_QUERY);\n};\nvar isFocused = function isFocused(element) {\n  return element == document.activeElement;\n};\nvar isNothingFocused = function isNothingFocused() {\n  return !document.activeElement;\n};\nvar FocusTrap = /*#__PURE__*/function () {\n  function FocusTrap() {\n    _classCallCheck(this, FocusTrap);\n    this.root = null;\n    this.elements = [];\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.enable = this.enable.bind(this);\n    this.disable = this.disable.bind(this);\n    this.firstElement = this.firstElement.bind(this);\n    this.lastElement = this.lastElement.bind(this);\n  }\n  _createClass(FocusTrap, [{\n    key: \"lastElement\",\n    value: function lastElement() {\n      return this.elements[this.elements.length - 1] || null;\n    }\n  }, {\n    key: \"firstElement\",\n    value: function firstElement() {\n      return this.elements[0] || null;\n    }\n  }, {\n    key: \"onKeyDown\",\n    value: function onKeyDown(event) {\n      if (!isTabPressed(event)) {\n        return;\n      }\n      if (event.shiftKey) {\n        if (isFocused(this.firstElement())) {\n          this.lastElement().focus();\n          event.preventDefault();\n        }\n        return;\n      }\n      if (isNothingFocused() || isFocused(this.lastElement())) {\n        this.firstElement().focus();\n        event.preventDefault();\n        return;\n      }\n    }\n  }, {\n    key: \"enabled\",\n    value: function enabled() {\n      return !!this.root;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable(root) {\n      if (!root) {\n        return;\n      }\n      this.root = root;\n      this.elements = queryFocusableElements(this.root);\n      this.root.addEventListener('keydown', this.onKeyDown);\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      this.root.removeEventListener('keydown', this.onKeyDown);\n      this.root = null;\n    }\n  }]);\n  return FocusTrap;\n}();\nvar setStyle = function setStyle(el, key, value) {\n  var cacheStyle = el.style[key];\n  el.style[key] = value;\n  return function () {\n    el.style[key] = cacheStyle;\n  };\n};\nvar getPosition = function getPosition(e) {\n  var _ref = e.targetTouches ? e.targetTouches[0] : e,\n    x = _ref.clientX,\n    y = _ref.clientY;\n  return {\n    x: x,\n    y: y\n  };\n};\nvar capitalize = function capitalize(s) {\n  return s.charAt(0).toUpperCase() + s.slice(1);\n};\nvar clamp = function clamp(min, num, max) {\n  if (typeof min !== 'number') {\n    min = Math.min(num, max) || num;\n  }\n  if (typeof max !== 'number') {\n    max = Math.max(num, min);\n  }\n  return Math.min(Math.max(num, min), max);\n};\nvar trimPx = function trimPx(distance) {\n  return distance && Number(distance.replace(/px$/, '')) || 0;\n};\nvar validDragElement = function validDragElement(e, el, dragSelector) {\n  if (dragSelector === '') return true;\n  var list = _toConsumableArray(el.querySelectorAll(dragSelector));\n  return list.includes(e.target);\n};\nvar pointerType = {\n  down: {\n    pc: 'mousedown',\n    m: 'touchstart'\n  },\n  move: {\n    pc: 'mousemove',\n    m: 'touchmove'\n  },\n  up: {\n    pc: 'mouseup',\n    m: 'touchend'\n  }\n};\nvar addListener = function addListener(type, el, callback) {\n  el && el.addEventListener(pointerType[type].pc, callback);\n  el && el.addEventListener(pointerType[type].m, callback, {\n    passive: false\n  });\n};\nvar removeListener = function removeListener(type, el, callback) {\n  el && el.removeEventListener(pointerType[type].pc, callback);\n  el && el.removeEventListener(pointerType[type].m, callback);\n};\nvar hasPassiveEvents = false;\nif (typeof window !== 'undefined') {\n  var passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true;\n      return undefined;\n    }\n  };\n  window.addEventListener('testPassive', null, passiveTestOptions);\n  window.removeEventListener('testPassive', null, passiveTestOptions);\n}\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\nvar locks = [];\nvar documentListenerAdded = false;\nvar clientY = 0;\nvar initialClientY = -1;\nvar previousBodyOverflowSetting;\nvar previousBodyPaddingRight;\nvar hasScrollbar = function hasScrollbar(el) {\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return false;\n  var style = window.getComputedStyle(el);\n  return ['auto', 'scroll'].includes(style.overflowY) && el.scrollHeight > el.clientHeight;\n};\nvar shouldScroll = function shouldScroll(el, delta) {\n  if (el.scrollTop === 0 && delta < 0) return false;\n  if (el.scrollTop + el.clientHeight + delta >= el.scrollHeight && delta > 0) return false;\n  return true;\n};\nvar composedPath = function composedPath(el) {\n  var path = [];\n  while (el) {\n    path.push(el);\n    if (el.classList.contains('vfm')) return path;\n    el = el.parentElement;\n  }\n  return path;\n};\nvar hasAnyScrollableEl = function hasAnyScrollableEl(el, delta) {\n  var hasAnyScrollableEl = false;\n  var path = composedPath(el);\n  path.forEach(function (el) {\n    if (hasScrollbar(el) && shouldScroll(el, delta)) {\n      hasAnyScrollableEl = true;\n    }\n  });\n  return hasAnyScrollableEl;\n};\nvar allowTouchMove = function allowTouchMove(el) {\n  return locks.some(function () {\n    return hasAnyScrollableEl(el, -clientY);\n  });\n};\nvar preventDefault = function preventDefault(rawEvent) {\n  var e = rawEvent || window.event;\n  if (allowTouchMove(e.target)) {\n    return true;\n  }\n  if (e.touches.length > 1) return true;\n  if (e.preventDefault) e.preventDefault();\n  return false;\n};\nvar setOverflowHidden = function setOverflowHidden(options) {\n  if (previousBodyPaddingRight === undefined) {\n    var reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;\n    var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;\n    if (reserveScrollBarGap && scrollBarGap > 0) {\n      var computedBodyPaddingRight = parseInt(getComputedStyle(document.body).getPropertyValue('padding-right'), 10);\n      previousBodyPaddingRight = document.body.style.paddingRight;\n      document.body.style.paddingRight = \"\".concat(computedBodyPaddingRight + scrollBarGap, \"px\");\n    }\n  }\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  }\n};\nvar restoreOverflowSetting = function restoreOverflowSetting() {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight;\n    previousBodyPaddingRight = undefined;\n  }\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting;\n    previousBodyOverflowSetting = undefined;\n  }\n};\nvar isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {\n  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;\n};\nvar handleScroll = function handleScroll(event, targetElement) {\n  clientY = event.targetTouches[0].clientY - initialClientY;\n  if (allowTouchMove(event.target)) {\n    return false;\n  }\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    return preventDefault(event);\n  }\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    return preventDefault(event);\n  }\n  event.stopPropagation();\n  return true;\n};\nvar disableBodyScroll = function disableBodyScroll(targetElement, options) {\n  if (!targetElement) {\n    console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');\n    return;\n  }\n  if (locks.some(function (lock) {\n    return lock.targetElement === targetElement;\n  })) {\n    return;\n  }\n  var lock = {\n    targetElement: targetElement,\n    options: options || {}\n  };\n  locks = [].concat(_toConsumableArray(locks), [lock]);\n  if (isIosDevice) {\n    targetElement.ontouchstart = function (event) {\n      if (event.targetTouches.length === 1) {\n        initialClientY = event.targetTouches[0].clientY;\n      }\n    };\n    targetElement.ontouchmove = function (event) {\n      if (event.targetTouches.length === 1) {\n        handleScroll(event, targetElement);\n      }\n    };\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? {\n        passive: false\n      } : undefined);\n      documentListenerAdded = true;\n    }\n  } else {\n    setOverflowHidden(options);\n  }\n};\nvar enableBodyScroll = function enableBodyScroll(targetElement) {\n  if (!targetElement) {\n    console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');\n    return;\n  }\n  locks = locks.filter(function (lock) {\n    return lock.targetElement !== targetElement;\n  });\n  if (isIosDevice) {\n    targetElement.ontouchstart = null;\n    targetElement.ontouchmove = null;\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? {\n        passive: false\n      } : undefined);\n      documentListenerAdded = false;\n    }\n  } else if (!locks.length) {\n    restoreOverflowSetting();\n  }\n};\nvar noop = function noop() {};\nvar TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n};\nvar resizeCursor = {\n  t: 'ns-resize',\n  tr: 'nesw-resize',\n  r: 'ew-resize',\n  br: 'nwse-resize',\n  b: 'ns-resize',\n  bl: 'nesw-resize',\n  l: 'ew-resize',\n  tl: 'nwse-resize'\n};\nvar script$1 = {\n  props: {\n    name: {\n      type: String,\n      \"default\": null\n    },\n    modelValue: {\n      type: Boolean,\n      \"default\": false\n    },\n    ssr: {\n      type: Boolean,\n      \"default\": true\n    },\n    classes: {\n      type: [String, Object, Array],\n      \"default\": ''\n    },\n    overlayClass: {\n      type: [String, Object, Array],\n      \"default\": ''\n    },\n    contentClass: {\n      type: [String, Object, Array],\n      \"default\": ''\n    },\n    styles: {\n      type: [Object, Array],\n      \"default\": function _default() {\n        return {};\n      }\n    },\n    overlayStyle: {\n      type: [Object, Array],\n      \"default\": function _default() {\n        return {};\n      }\n    },\n    contentStyle: {\n      type: [Object, Array],\n      \"default\": function _default() {\n        return {};\n      }\n    },\n    lockScroll: {\n      type: Boolean,\n      \"default\": true\n    },\n    hideOverlay: {\n      type: Boolean,\n      \"default\": false\n    },\n    clickToClose: {\n      type: Boolean,\n      \"default\": true\n    },\n    escToClose: {\n      type: Boolean,\n      \"default\": false\n    },\n    preventClick: {\n      type: Boolean,\n      \"default\": false\n    },\n    attach: {\n      type: null,\n      \"default\": false,\n      validator: function validator(val) {\n        var type = _typeof(val);\n        if (type === 'boolean' || type === 'string') return true;\n        return val.nodeType === Node.ELEMENT_NODE;\n      }\n    },\n    transition: {\n      type: [String, Object],\n      \"default\": 'vfm'\n    },\n    overlayTransition: {\n      type: [String, Object],\n      \"default\": 'vfm'\n    },\n    keepOverlay: {\n      type: Boolean,\n      \"default\": false\n    },\n    zIndexAuto: {\n      type: Boolean,\n      \"default\": true\n    },\n    zIndexBase: {\n      type: [String, Number],\n      \"default\": 1000\n    },\n    zIndex: {\n      type: [Boolean, String, Number],\n      \"default\": false\n    },\n    focusRetain: {\n      type: Boolean,\n      \"default\": true\n    },\n    focusTrap: {\n      type: Boolean,\n      \"default\": false\n    },\n    fitParent: {\n      type: Boolean,\n      \"default\": true\n    },\n    drag: {\n      type: Boolean,\n      \"default\": false\n    },\n    dragSelector: {\n      type: String,\n      \"default\": ''\n    },\n    keepChangedStyle: {\n      type: Boolean,\n      \"default\": false\n    },\n    resize: {\n      type: Boolean,\n      \"default\": false\n    },\n    resizeDirections: {\n      type: Array,\n      \"default\": function _default() {\n        return ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'];\n      },\n      validator: function validator(val) {\n        return ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'].filter(function (value) {\n          return val.indexOf(value) !== -1;\n        }).length === val.length;\n      }\n    },\n    minWidth: {\n      type: Number,\n      \"default\": 0\n    },\n    minHeight: {\n      type: Number,\n      \"default\": 0\n    },\n    maxWidth: {\n      type: Number,\n      \"default\": Infinity\n    },\n    maxHeight: {\n      type: Number,\n      \"default\": Infinity\n    }\n  },\n  emits: ['update:modelValue', 'click-outside', 'before-open', 'opened', 'before-close', 'closed', '_before-open', '_opened', '_closed', 'drag:start', 'drag:move', 'drag:end', 'resize:start', 'resize:move', 'resize:end'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var uid = Symbol('vfm');\n    var root = ref(null);\n    var vfmContainer = ref(null);\n    var vfmContent = ref(null);\n    var vfmResize = ref(null);\n    var vfmOverlayTransition = ref(null);\n    var vfmTransition = ref(null);\n    var modalStackIndex = ref(null);\n    var $focusTrap = new FocusTrap();\n    var visible = ref(false);\n    var visibility = reactive({\n      modal: false,\n      overlay: false,\n      resize: false\n    });\n    var overlayTransitionState = ref(null);\n    var modalTransitionState = ref(null);\n    var _stopEvent = ref(false);\n    var params = ref({});\n    var dragResizeStyle = ref({});\n    var _state = ref(null);\n    var lastMousedownEl = ref(null);\n    var _resolveToggle = noop;\n    var _rejectToggle = noop;\n    var computedOverlayTransition = computed(function () {\n      if (typeof props.overlayTransition === 'string') return {\n        name: props.overlayTransition\n      };\n      return _objectSpread2({}, props.overlayTransition);\n    });\n    var computedTransition = computed(function () {\n      if (typeof props.transition === 'string') return {\n        name: props.transition\n      };\n      return _objectSpread2({}, props.transition);\n    });\n    var isComponentReadyToBeDestroyed = computed(function () {\n      return (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) && modalTransitionState.value === TransitionState.Leave;\n    });\n    var calculateZIndex = computed(function () {\n      if (props.zIndex === false) {\n        if (props.zIndexAuto) {\n          return +props.zIndexBase + 2 * (modalStackIndex.value || 0);\n        } else {\n          return false;\n        }\n      } else {\n        return props.zIndex;\n      }\n    });\n    var bindStyle = computed(function () {\n      return _objectSpread2({}, calculateZIndex.value !== false && {\n        zIndex: calculateZIndex.value\n      });\n    });\n    var bindContentStyle = computed(function () {\n      var style = [dragResizeStyle.value];\n      Array.isArray(props.contentStyle) ? style.push.apply(style, _toConsumableArray(props.contentStyle)) : style.push(props.contentStyle);\n      return style;\n    });\n    watch(function () {\n      return props.modelValue;\n    }, function (value) {\n      if (_stopEvent.value) {\n        _stopEvent.value = false;\n        return;\n      }\n      mounted();\n      if (!value) {\n        if (emitEvent('before-close', true)) {\n          _rejectToggle('hide');\n          return;\n        }\n        close();\n      }\n    });\n    watch(function () {\n      return props.lockScroll;\n    }, handleLockScroll);\n    watch(function () {\n      return props.hideOverlay;\n    }, function (value) {\n      if (props.modelValue && !value) {\n        visibility.overlay = true;\n      }\n    });\n    watch(function () {\n      return props.attach;\n    }, mounted);\n    watch(isComponentReadyToBeDestroyed, function (val) {\n      if (val) {\n        visible.value = false;\n        vfmContainer.value.style.display = 'none';\n      }\n    }, {\n      flush: 'post'\n    });\n    watch(function () {\n      return props.drag;\n    }, function (val) {\n      if (visible.value) {\n        val ? addDragDown() : removeDragDown();\n      }\n    });\n    watch(function () {\n      return props.resize;\n    }, function (val) {\n      if (visible.value) {\n        val ? addResizeDown() : removeResizeDown();\n      }\n    });\n    watch(function () {\n      return props.keepChangedStyle;\n    }, function (val) {\n      if (!val) {\n        dragResizeStyle.value = {};\n      }\n    });\n    onMounted(function () {\n      props.api.modals.push(getModalInfo());\n      mounted();\n    });\n    onBeforeUnmount(function () {\n      var _root$value;\n      close();\n      props.lockScroll && vfmContainer.value && enableBodyScroll(vfmContainer.value);\n      root === null || root === void 0 ? void 0 : (_root$value = root.value) === null || _root$value === void 0 ? void 0 : _root$value.remove();\n      var index = props.api.modals.findIndex(function (vm) {\n        return vm.uid === uid;\n      });\n      props.api.modals.splice(index, 1);\n    });\n    function getModalInfo() {\n      return {\n        uid: uid,\n        props: props,\n        emit: emit,\n        vfmContainer: vfmContainer,\n        vfmContent: vfmContent,\n        vfmResize: vfmResize,\n        vfmOverlayTransition: vfmOverlayTransition,\n        vfmTransition: vfmTransition,\n        getAttachElement: getAttachElement,\n        modalStackIndex: modalStackIndex,\n        visibility: visibility,\n        handleLockScroll: handleLockScroll,\n        $focusTrap: $focusTrap,\n        toggle: toggle,\n        params: params\n      };\n    }\n    function mounted() {\n      if (props.modelValue) {\n        emit('_before-open', createModalEvent({\n          type: '_before-open'\n        }));\n        if (emitEvent('before-open', false)) {\n          _rejectToggle('show');\n          return;\n        }\n        var target = getAttachElement();\n        if (target || props.attach === false) {\n          if (props.attach !== false) {\n            if (root.value) {\n              target.appendChild(root.value);\n            } else {\n              visible.value = true;\n              nextTick(function () {\n                mounted();\n              });\n              return;\n            }\n          }\n          var index = props.api.openedModals.findIndex(function (vm) {\n            return vm.uid === uid;\n          });\n          if (index !== -1) {\n            props.api.openedModals.splice(index, 1);\n          }\n          props.api.openedModals.push(getModalInfo());\n          modalStackIndex.value = props.api.openedModals.length - 1;\n          handleLockScroll();\n          props.api.openedModals.filter(function (vm) {\n            return vm.uid !== uid;\n          }).forEach(function (vm, index) {\n            if (vm.getAttachElement() === target) {\n              vm.modalStackIndex.value = index;\n              !vm.props.keepOverlay && (vm.visibility.overlay = false);\n            }\n          });\n          visible.value = true;\n          startTransitionEnter();\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach));\n        }\n      }\n    }\n    function close() {\n      var index = props.api.openedModals.findIndex(function (vm) {\n        return vm.uid === uid;\n      });\n      if (index !== -1) {\n        props.api.openedModals.splice(index, 1);\n      }\n      if (props.api.openedModals.length > 0) {\n        var $_vm = props.api.openedModals[props.api.openedModals.length - 1];\n        $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus();\n        if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n          $_vm.vfmContainer.value.focus();\n        }\n        !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true);\n      }\n      props.drag && removeDragDown();\n      props.resize && removeResizeDown();\n      _state.value = null;\n      startTransitionLeave();\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        nextTick(function () {\n          if (props.lockScroll) {\n            disableBodyScroll(vfmContainer.value, {\n              reserveScrollBarGap: true\n            });\n          } else {\n            enableBodyScroll(vfmContainer.value);\n          }\n        });\n      }\n    }\n    function getAttachElement() {\n      var target;\n      if (props.attach === false) {\n        target = false;\n      } else if (typeof props.attach === 'string') {\n        if (window) {\n          target = window.document.querySelector(props.attach);\n        } else {\n          target = false;\n        }\n      } else {\n        target = props.attach;\n      }\n      return target;\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true;\n      visibility.modal = true;\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false;\n      visibility.modal = false;\n    }\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering;\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter;\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving;\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave;\n    }\n    function beforeModalEnter() {\n      modalTransitionState.value = TransitionState.Entering;\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter;\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus();\n      }\n      props.focusTrap && $focusTrap.enable(vfmContainer.value);\n      props.drag && addDragDown();\n      props.resize && addResizeDown();\n      emit('_opened');\n      emit('opened', createModalEvent({\n        type: 'opened'\n      }));\n      _resolveToggle('show');\n    }\n    function beforeModalLeave() {\n      modalTransitionState.value = TransitionState.Leaving;\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable();\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave;\n      modalStackIndex.value = null;\n      props.lockScroll && enableBodyScroll(vfmContainer.value);\n      if (!props.keepChangedStyle) {\n        dragResizeStyle.value = {};\n      }\n      var stopEvent = false;\n      var event = createModalEvent({\n        type: 'closed',\n        stop: function stop() {\n          stopEvent = true;\n        }\n      });\n      emit('_closed');\n      emit('closed', event);\n      _resolveToggle('hide');\n      if (stopEvent) return;\n      params.value = {};\n    }\n    function onMousedown(e) {\n      lastMousedownEl.value = e === null || e === void 0 ? void 0 : e.target;\n    }\n    function onMouseupContainer() {\n      if (lastMousedownEl.value !== vfmContainer.value) return;\n      if (_state.value === 'resize:move') return;\n      emit('click-outside', createModalEvent({\n        type: 'click-outside'\n      }));\n      props.clickToClose && emit('update:modelValue', false);\n    }\n    function onEsc() {\n      if (visible.value && props.escToClose) {\n        emit('update:modelValue', false);\n      }\n    }\n    function createModalEvent() {\n      var eventProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _objectSpread2({\n        ref: getModalInfo()\n      }, eventProps);\n    }\n    function emitEvent(eventType, value) {\n      var stopEvent = false;\n      var event = createModalEvent({\n        type: eventType,\n        stop: function stop() {\n          stopEvent = true;\n        }\n      });\n      emit(eventType, event);\n      if (stopEvent) {\n        _stopEvent.value = true;\n        nextTick(function () {\n          emit('update:modelValue', value);\n        });\n        return true;\n      }\n      return false;\n    }\n    function emitState(e, state, action) {\n      _state.value = \"\".concat(state, \":\").concat(action);\n      emit(_state.value, e);\n    }\n    function toggle(show, _params) {\n      var _arguments = arguments;\n      return new Promise(function (resolve, reject) {\n        _resolveToggle = function resolveToggle(res) {\n          resolve(res);\n          _resolveToggle = noop;\n        };\n        _rejectToggle = function rejectToggle(err) {\n          reject(err);\n          _rejectToggle = noop;\n        };\n        var value = typeof show === 'boolean' ? show : !props.modelValue;\n        if (value && _arguments.length === 2) {\n          params.value = _params;\n        }\n        emit('update:modelValue', value);\n      });\n    }\n    function pointerDown(e) {\n      e.stopPropagation();\n      var STATE_RESIZE = 'resize';\n      var STATE_DRAG = 'drag';\n      var direction = e.target.getAttribute('direction');\n      var state;\n      if (direction) {\n        state = STATE_RESIZE;\n      } else if (validDragElement(e, vfmContent.value, props.dragSelector)) {\n        state = STATE_DRAG;\n      } else {\n        return;\n      }\n      emitState(e, state, 'start');\n      var down = getPosition(e);\n      var rectContainer = vfmContainer.value.getBoundingClientRect();\n      var rectContent = vfmContent.value.getBoundingClientRect();\n      var isAbsolute = window.getComputedStyle(vfmContent.value).position === 'absolute';\n      var position = {\n        top: trimPx(dragResizeStyle.value.top),\n        left: trimPx(dragResizeStyle.value.left)\n      };\n      var limit = function () {\n        if (props.fitParent) {\n          var _limit = {\n            absolute: function absolute() {\n              return {\n                minTop: 0,\n                minLeft: 0,\n                maxTop: rectContainer.height - rectContent.height,\n                maxLeft: rectContainer.width - rectContent.width\n              };\n            },\n            relative: function relative() {\n              return {\n                minTop: position.top + rectContainer.top - rectContent.top,\n                minLeft: position.left + rectContainer.left - rectContent.left,\n                maxTop: position.top + rectContainer.bottom - rectContent.bottom,\n                maxLeft: position.left + rectContainer.right - rectContent.right\n              };\n            }\n          };\n          return isAbsolute ? _limit.absolute() : _limit.relative();\n        } else {\n          return {};\n        }\n      }();\n      var resetBodyCursor = state === STATE_RESIZE && setStyle(document.body, 'cursor', resizeCursor[direction]);\n      var moving = function moving(e) {\n        e.stopPropagation();\n        emitState(e, state, 'move');\n        var move = getPosition(e);\n        var offset = {\n          x: move.x - down.x,\n          y: move.y - down.y\n        };\n        if (state === STATE_RESIZE) {\n          offset = getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute);\n        }\n        var top;\n        var left;\n        if (isAbsolute) {\n          top = rectContent.top - rectContainer.top + offset.y;\n          left = rectContent.left - rectContainer.left + offset.x;\n        } else {\n          top = position.top + offset.y;\n          left = position.left + offset.x;\n        }\n        if (state === STATE_DRAG && props.fitParent) {\n          top = clamp(limit.minTop, top, limit.maxTop);\n          left = clamp(limit.minLeft, left, limit.maxLeft);\n        }\n        var style = _objectSpread2(_objectSpread2(_objectSpread2({\n          position: 'relative',\n          top: top + 'px',\n          left: left + 'px',\n          margin: 'unset',\n          touchAction: 'none'\n        }, isAbsolute && {\n          position: 'absolute',\n          transform: 'unset',\n          width: rectContent.width + 'px',\n          height: rectContent.height + 'px'\n        }), offset.width && {\n          width: offset.width + 'px'\n        }), offset.height && {\n          height: offset.height + 'px'\n        });\n        dragResizeStyle.value = _objectSpread2(_objectSpread2({}, dragResizeStyle.value), style);\n      };\n      var end = function end(e) {\n        e.stopPropagation();\n        if (state === STATE_RESIZE) {\n          resetBodyCursor && resetBodyCursor();\n        }\n        setTimeout(function () {\n          emitState(e, state, 'end');\n        });\n        removeListener('move', document, moving);\n        removeListener('up', document, end);\n      };\n      addListener('move', document, moving);\n      addListener('up', document, end);\n    }\n    function addDragDown() {\n      addListener('down', vfmContent.value, pointerDown);\n      dragResizeStyle.value.touchAction = 'none';\n    }\n    function removeDragDown() {\n      removeListener('down', vfmContent.value, pointerDown);\n    }\n    function addResizeDown() {\n      visibility.resize = true;\n      nextTick(function () {\n        addListener('down', vfmResize.value, pointerDown);\n      });\n    }\n    function removeResizeDown() {\n      removeListener('down', vfmResize.value, pointerDown);\n      visibility.resize = false;\n    }\n    function getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute) {\n      var setOffset = function setOffset(dir) {\n        var _ref2;\n        var offsetAxis = offset[dir.axis];\n        offsetAxis = props.fitParent ? clamp(dir.min, offsetAxis, dir.max) : offsetAxis;\n        var edge = clamp(dir.minEdge, dir.getEdge(offsetAxis), dir.maxEdge);\n        offsetAxis = dir.getOffsetAxis(edge, isAbsolute);\n        return _ref2 = {}, _defineProperty(_ref2, dir.edgeName, edge), _defineProperty(_ref2, dir.axis, offsetAxis), _ref2;\n      };\n      var getDirectionInfo = function getDirectionInfo(position, edgeName, axis, isPositive) {\n        var rectContentEdge = rectContent[edgeName];\n        var positionOffset = rectContainer[position] - rectContent[position];\n        var EdgeName = capitalize(edgeName);\n        return {\n          axis: axis,\n          edgeName: edgeName,\n          min: isPositive ? positionOffset : -rectContentEdge,\n          max: isPositive ? rectContentEdge : positionOffset,\n          minEdge: props[\"min\".concat(EdgeName)],\n          maxEdge: props[\"max\".concat(EdgeName)],\n          getEdge: function getEdge(offsetAxis) {\n            return rectContent[edgeName] - offsetAxis * (isPositive ? 1 : -1);\n          },\n          getOffsetAxis: function getOffsetAxis(edge, isAbsolute) {\n            var offsetAxis = rectContent[edgeName] - edge;\n            if (isAbsolute) {\n              return isPositive ? offsetAxis : 0;\n            } else {\n              return (isPositive ? 1 : -1) * offsetAxis / 2;\n            }\n          }\n        };\n      };\n      var directions = {\n        t: ['top', 'height', 'y', true],\n        b: ['bottom', 'height', 'y', false],\n        l: ['left', 'width', 'x', true],\n        r: ['right', 'width', 'x', false]\n      };\n      var _offset = {\n        x: 0,\n        y: 0\n      };\n      direction.split('').forEach(function (dir) {\n        var directionInfo = getDirectionInfo.apply(void 0, _toConsumableArray(directions[dir]));\n        _offset = _objectSpread2(_objectSpread2({}, _offset), setOffset(directionInfo));\n      });\n      return _offset;\n    }\n    return {\n      root: root,\n      vfmContainer: vfmContainer,\n      vfmContent: vfmContent,\n      vfmResize: vfmResize,\n      vfmOverlayTransition: vfmOverlayTransition,\n      vfmTransition: vfmTransition,\n      computedOverlayTransition: computedOverlayTransition,\n      computedTransition: computedTransition,\n      visible: visible,\n      visibility: visibility,\n      params: params,\n      calculateZIndex: calculateZIndex,\n      bindStyle: bindStyle,\n      bindContentStyle: bindContentStyle,\n      beforeOverlayEnter: beforeOverlayEnter,\n      afterOverlayEnter: afterOverlayEnter,\n      beforeOverlayLeave: beforeOverlayLeave,\n      afterOverlayLeave: afterOverlayLeave,\n      beforeModalEnter: beforeModalEnter,\n      afterModalEnter: afterModalEnter,\n      beforeModalLeave: beforeModalLeave,\n      afterModalLeave: afterModalLeave,\n      onMousedown: onMousedown,\n      onMouseupContainer: onMouseupContainer,\n      onEsc: onEsc\n    };\n  }\n};\nvar _withId = withScopeId(\"data-v-2836fdb5\");\npushScopeId(\"data-v-2836fdb5\");\nvar _hoisted_1$1 = {\n  key: 0,\n  ref: \"vfmResize\",\n  \"class\": \"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none\"\n};\npopScopeId();\nvar render$1 = _withId(function (_ctx, _cache, $props, $setup, $data, $options) {\n  return $props.ssr || $setup.visible ? withDirectives((openBlock(), createBlock(\"div\", {\n    key: 0,\n    ref: \"root\",\n    style: $setup.bindStyle,\n    \"class\": [\"vfm vfm--inset\", [$props.attach === false ? 'vfm--fixed' : 'vfm--absolute', {\n      'vfm--prevent-none': $props.preventClick\n    }]],\n    onKeydown: _cache[4] || (_cache[4] = withKeys(function () {\n      return $setup.onEsc && $setup.onEsc.apply($setup, arguments);\n    }, [\"esc\"]))\n  }, [createVNode(Transition, mergeProps($setup.computedOverlayTransition, {\n    onBeforeEnter: $setup.beforeOverlayEnter,\n    onAfterEnter: $setup.afterOverlayEnter,\n    onBeforeLeave: $setup.beforeOverlayLeave,\n    onAfterLeave: $setup.afterOverlayLeave\n  }), {\n    \"default\": _withId(function () {\n      return [!$props.hideOverlay && $setup.visibility.overlay ? (openBlock(), createBlock(\"div\", {\n        key: 0,\n        \"class\": [\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\", $props.overlayClass],\n        style: $props.overlayStyle\n      }, null, 6)) : createCommentVNode(\"v-if\", true)];\n    }),\n    _: 1\n  }, 16, [\"onBeforeEnter\", \"onAfterEnter\", \"onBeforeLeave\", \"onAfterLeave\"]), createVNode(Transition, mergeProps($setup.computedTransition, {\n    onBeforeEnter: $setup.beforeModalEnter,\n    onAfterEnter: $setup.afterModalEnter,\n    onBeforeLeave: $setup.beforeModalLeave,\n    onAfterLeave: $setup.afterModalLeave\n  }), {\n    \"default\": _withId(function () {\n      return [withDirectives(createVNode(\"div\", {\n        ref: \"vfmContainer\",\n        \"class\": [\"vfm__container vfm--absolute vfm--inset vfm--outline-none\", $props.classes],\n        style: $props.styles,\n        \"aria-expanded\": $setup.visibility.modal.toString(),\n        role: \"dialog\",\n        \"aria-modal\": \"true\",\n        tabindex: \"-1\",\n        onMouseup: _cache[2] || (_cache[2] = withModifiers(function () {\n          return $setup.onMouseupContainer && $setup.onMouseupContainer.apply($setup, arguments);\n        }, [\"self\"])),\n        onMousedown: _cache[3] || (_cache[3] = withModifiers(function () {\n          return $setup.onMousedown && $setup.onMousedown.apply($setup, arguments);\n        }, [\"self\"]))\n      }, [createVNode(\"div\", {\n        ref: \"vfmContent\",\n        \"class\": [\"vfm__content\", [$props.contentClass, {\n          'vfm--prevent-auto': $props.preventClick\n        }]],\n        style: $setup.bindContentStyle,\n        onMousedown: _cache[1] || (_cache[1] = function ($event) {\n          return $setup.onMousedown(null);\n        })\n      }, [renderSlot(_ctx.$slots, \"default\", {\n        params: $setup.params,\n        close: function close() {\n          return _ctx.$emit('update:modelValue', false);\n        }\n      }), $setup.visibility.resize && $setup.visibility.modal ? (openBlock(), createBlock(\"div\", _hoisted_1$1, [(openBlock(true), createBlock(Fragment, null, renderList($props.resizeDirections, function (direction) {\n        return openBlock(), createBlock(\"div\", {\n          key: direction,\n          direction: direction,\n          \"class\": [\"vfm--resize-\".concat(direction), \"vfm--absolute vfm--prevent-auto\"]\n        }, null, 10, [\"direction\"]);\n      }), 128))], 512)) : createCommentVNode(\"v-if\", true)], 38)], 46, [\"aria-expanded\"]), [[vShow, $setup.visibility.modal]])];\n    }),\n    _: 3\n  }, 16, [\"onBeforeEnter\", \"onAfterEnter\", \"onBeforeLeave\", \"onAfterLeave\"])], 38)), [[vShow, !$props.ssr || $setup.visible]]) : createCommentVNode(\"v-if\", true);\n});\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\nvar css_248z = \"\\n.vfm--fixed[data-v-2836fdb5] {\\n  position: fixed;\\n}\\n.vfm--absolute[data-v-2836fdb5] {\\n  position: absolute;\\n}\\n.vfm--inset[data-v-2836fdb5] {\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n}\\n.vfm--overlay[data-v-2836fdb5] {\\n  background-color: rgba(0, 0, 0, 0.5);\\n}\\n.vfm--prevent-none[data-v-2836fdb5] {\\n  pointer-events: none;\\n}\\n.vfm--prevent-auto[data-v-2836fdb5] {\\n  pointer-events: auto;\\n}\\n.vfm--outline-none[data-v-2836fdb5]:focus {\\n  outline: none;\\n}\\n.vfm-enter-active[data-v-2836fdb5],\\n.vfm-leave-active[data-v-2836fdb5] {\\n  transition: opacity 0.2s;\\n}\\n.vfm-enter-from[data-v-2836fdb5],\\n.vfm-leave-to[data-v-2836fdb5] {\\n  opacity: 0;\\n}\\n.vfm--touch-none[data-v-2836fdb5] {\\n  touch-action: none;\\n}\\n.vfm--select-none[data-v-2836fdb5] {\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n.vfm--resize-tr[data-v-2836fdb5],\\n.vfm--resize-br[data-v-2836fdb5],\\n.vfm--resize-bl[data-v-2836fdb5],\\n.vfm--resize-tl[data-v-2836fdb5] {\\n  width: 12px;\\n  height: 12px;\\n  z-index: 10;\\n}\\n.vfm--resize-t[data-v-2836fdb5] {\\n  top: -6px;\\n  left: 0;\\n  width: 100%;\\n  height: 12px;\\n  cursor: ns-resize;\\n}\\n.vfm--resize-tr[data-v-2836fdb5] {\\n  top: -6px;\\n  right: -6px;\\n  cursor: nesw-resize;\\n}\\n.vfm--resize-r[data-v-2836fdb5] {\\n  top: 0;\\n  right: -6px;\\n  width: 12px;\\n  height: 100%;\\n  cursor: ew-resize;\\n}\\n.vfm--resize-br[data-v-2836fdb5] {\\n  bottom: -6px;\\n  right: -6px;\\n  cursor: nwse-resize;\\n}\\n.vfm--resize-b[data-v-2836fdb5] {\\n  bottom: -6px;\\n  left: 0;\\n  width: 100%;\\n  height: 12px;\\n  cursor: ns-resize;\\n}\\n.vfm--resize-bl[data-v-2836fdb5] {\\n  bottom: -6px;\\n  left: -6px;\\n  cursor: nesw-resize;\\n}\\n.vfm--resize-l[data-v-2836fdb5] {\\n  top: 0;\\n  left: -6px;\\n  width: 12px;\\n  height: 100%;\\n  cursor: ew-resize;\\n}\\n.vfm--resize-tl[data-v-2836fdb5] {\\n  top: -6px;\\n  left: -6px;\\n  cursor: nwse-resize;\\n}\\n\";\nstyleInject(css_248z);\nscript$1.render = render$1;\nscript$1.__scopeId = \"data-v-2836fdb5\";\nscript$1.__file = \"lib/VueFinalModal.vue\";\nvar script = {\n  props: {},\n  methods: {\n    slice: function slice(index) {\n      this.api.dynamicModals.splice(index, 1);\n    },\n    beforeOpen: function beforeOpen(e, modal, index) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        e.ref.params.value = modal.params;\n        yield _this.$nextTick();\n        yield _this.$nextTick();\n        if (!modal.value) {\n          _this.slice(index);\n          modal.reject('show');\n        }\n      })();\n    },\n    isString: function isString(val) {\n      return typeof val === 'string';\n    }\n  }\n};\nvar _hoisted_1 = {\n  \"class\": \"modals-container\"\n};\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createBlock(\"div\", _hoisted_1, [(openBlock(true), createBlock(Fragment, null, renderList(_ctx.api.dynamicModals, function (modal, index) {\n    return openBlock(), createBlock(resolveDynamicComponent(modal.component), mergeProps({\n      key: modal.id\n    }, modal.bind, {\n      modelValue: modal.value,\n      \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n        return modal.value = $event;\n      }\n    }, toHandlers(modal.on), {\n      on_closed: function on_closed($event) {\n        return $options.slice(index);\n      },\n      on_beforeOpen: function on_beforeOpen(e) {\n        return $options.beforeOpen(e, modal);\n      },\n      on_opened: modal.opened\n    }), createSlots({\n      _: 2\n    }, [renderList(modal.slots, function (slot, key) {\n      return {\n        name: key,\n        fn: withCtx(function () {\n          return [createCommentVNode(\" eslint-disable vue/no-v-html \"), $options.isString(slot) ? (openBlock(), createBlock(\"div\", {\n            key: 0,\n            innerHTML: slot\n          }, null, 8, [\"innerHTML\"])) : (openBlock(), createBlock(resolveDynamicComponent(slot.component), mergeProps({\n            key: 1\n          }, slot.bind, toHandlers(slot.on || {})), null, 16))];\n        })\n      };\n    })]), 1040, [\"modelValue\", \"onUpdate:modelValue\", \"on_closed\", \"on_beforeOpen\", \"on_opened\"]);\n  }), 128))]);\n}\nscript.render = render;\nscript.__file = \"lib/ModalsContainer.vue\";\nfunction defineApi() {\n  var _modalComponent = null;\n  return {\n    show: function show(modal) {\n      var _this = this;\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      switch (_typeof(modal)) {\n        case 'string':\n          return this.toggle.apply(this, [modal, true].concat(args));\n        case 'object':\n          {\n            return Promise.allSettled([new Promise(function (resolve, reject) {\n              var defaultModal = {\n                value: true,\n                id: Symbol('dynamicModal'),\n                component: _modalComponent,\n                bind: {},\n                slots: {},\n                on: {},\n                params: args[0],\n                reject: reject,\n                opened: function opened() {\n                  resolve('show');\n                }\n              };\n              _this.dynamicModals.push(shallowReactive(Object.assign(defaultModal, modal)));\n            })]);\n          }\n      }\n    },\n    hide: function hide() {\n      for (var _len2 = arguments.length, names = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        names[_key2] = arguments[_key2];\n      }\n      return this.toggle(names, false);\n    },\n    hideAll: function hideAll() {\n      return this.hide.apply(this, _toConsumableArray(this.openedModals.map(function (modal) {\n        return modal.props.name;\n      })));\n    },\n    toggle: function toggle(name) {\n      for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n        args[_key3 - 1] = arguments[_key3];\n      }\n      var modals = Array.isArray(name) ? this.get.apply(this, _toConsumableArray(name)) : this.get(name);\n      return Promise.allSettled(modals.map(function (modal) {\n        return modal.toggle.apply(modal, args);\n      }));\n    },\n    get: function get() {\n      for (var _len4 = arguments.length, names = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        names[_key4] = arguments[_key4];\n      }\n      return this.modals.filter(function (modal) {\n        return names.includes(modal.props.name);\n      });\n    },\n    dynamicModals: shallowReactive([]),\n    openedModals: [],\n    modals: [],\n    _setDefaultModal: function _setDefaultModal(modalComponent) {\n      _modalComponent = modalComponent;\n    }\n  };\n}\nfunction bindApi(component, api) {\n  var _component = _objectSpread2(_objectSpread2({}, component), {}, {\n    props: _objectSpread2({}, component.props)\n  });\n  Object.assign(_component.props, {\n    api: {\n      type: Object,\n      \"default\": function _default() {\n        return api;\n      }\n    }\n  });\n  return _component;\n}\nfunction defineModal(api) {\n  var modalComponent = bindApi(script$1, api);\n  api._setDefaultModal(modalComponent);\n  return modalComponent;\n}\nfunction defineContainer(api) {\n  return bindApi(script, api);\n}\nvar _count = 0;\nvar _key = '$vfm';\nvar _componentName = 'VueFinalModal';\nvar _dynamicContainerName = 'ModalsContainer';\nvar defineVfm = function defineVfm() {\n  var _ref;\n  var api = defineApi();\n  return _ref = {}, _defineProperty(_ref, _key, api), _defineProperty(_ref, _componentName, defineModal(api)), _defineProperty(_ref, _dynamicContainerName, defineContainer(api)), _ref;\n};\nvar _vfm = defineVfm();\nvar $vfm = _vfm.$vfm,\n  VueFinalModal = _vfm.VueFinalModal,\n  ModalsContainer = _vfm.ModalsContainer;\nvar installVfm = function installVfm(App) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _ref2 = _count === 0 ? _vfm : defineVfm(),\n    $vfm = _ref2.$vfm,\n    VueFinalModal = _ref2.VueFinalModal,\n    ModalsContainer = _ref2.ModalsContainer;\n  _count += 1;\n  var key = options.key || _key;\n  var componentName = options.componentName || _componentName;\n  var dynamicContainerName = options.dynamicContainerName || _dynamicContainerName;\n  Object.defineProperty(App.config.globalProperties, key, {\n    get: function get() {\n      return $vfm;\n    }\n  });\n  App.provide(key, $vfm);\n  App.component(componentName, VueFinalModal);\n  App.component(dynamicContainerName, ModalsContainer);\n};\nvar vfmPlugin = function vfmPlugin(pluginOptions) {\n  return {\n    install: function install(App, options) {\n      var _options = Object.assign({}, pluginOptions, options);\n      installVfm(App, _options);\n    }\n  };\n};\nvfmPlugin.install = installVfm;\nexport default vfmPlugin;\nexport { $vfm, ModalsContainer, VueFinalModal, defineVfm, vfmPlugin };","map":{"version":3,"mappings":"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","names":["FOCUSABLE_ELEMENTS_QUERY","isTabPressed","event","key","keyCode","querySelectorAll","element","selector","queryFocusableElements","isFocused","document","activeElement","isNothingFocused","FocusTrap","_classCallCheck","root","elements","onKeyDown","bind","enable","disable","firstElement","lastElement","length","shiftKey","focus","preventDefault","addEventListener","removeEventListener","setStyle","el","value","cacheStyle","style","getPosition","e","targetTouches","x","clientX","y","clientY","capitalize","s","charAt","toUpperCase","slice","clamp","min","num","max","Math","trimPx","distance","Number","replace","validDragElement","dragSelector","list","includes","target","pointerType","down","pc","m","move","up","addListener","type","callback","passive","removeListener","hasPassiveEvents","window","passiveTestOptions","undefined","isIosDevice","navigator","platform","test","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPaddingRight","hasScrollbar","nodeType","Node","ELEMENT_NODE","getComputedStyle","overflowY","scrollHeight","clientHeight","shouldScroll","delta","scrollTop","composedPath","path","push","classList","contains","parentElement","hasAnyScrollableEl","forEach","allowTouchMove","some","rawEvent","touches","setOverflowHidden","reserveScrollBarGap","options","scrollBarGap","innerWidth","documentElement","clientWidth","computedBodyPaddingRight","parseInt","body","getPropertyValue","paddingRight","overflow","restoreOverflowSetting","isTargetElementTotallyScrolled","targetElement","handleScroll","stopPropagation","disableBodyScroll","console","error","lock","ontouchstart","ontouchmove","enableBodyScroll","filter","noop","TransitionState","Enter","Entering","Leave","Leaving","resizeCursor","t","tr","r","br","b","bl","l","tl","props","name","String","modelValue","Boolean","ssr","classes","Object","Array","overlayClass","contentClass","styles","overlayStyle","contentStyle","lockScroll","hideOverlay","clickToClose","escToClose","preventClick","attach","validator","val","transition","overlayTransition","keepOverlay","zIndexAuto","zIndexBase","zIndex","focusRetain","focusTrap","fitParent","drag","keepChangedStyle","resize","resizeDirections","indexOf","minWidth","minHeight","maxWidth","Infinity","maxHeight","emits","setup","emit","uid","Symbol","ref","vfmContainer","vfmContent","vfmResize","vfmOverlayTransition","vfmTransition","modalStackIndex","$focusTrap","visible","visibility","reactive","modal","overlay","overlayTransitionState","modalTransitionState","_stopEvent","params","dragResizeStyle","_state","lastMousedownEl","resolveToggle","rejectToggle","computedOverlayTransition","computed","computedTransition","isComponentReadyToBeDestroyed","calculateZIndex","bindStyle","bindContentStyle","isArray","watch","mounted","emitEvent","close","handleLockScroll","display","flush","addDragDown","removeDragDown","addResizeDown","removeResizeDown","onMounted","api","modals","getModalInfo","onBeforeUnmount","remove","index","findIndex","vm","splice","getAttachElement","toggle","createModalEvent","appendChild","nextTick","openedModals","startTransitionEnter","warn","concat","$_vm","startTransitionLeave","querySelector","beforeOverlayEnter","afterOverlayEnter","beforeOverlayLeave","afterOverlayLeave","beforeModalEnter","afterModalEnter","beforeModalLeave","enabled","afterModalLeave","stopEvent","stop","onMousedown","onMouseupContainer","onEsc","eventProps","eventType","emitState","state","action","show","_params","Promise","resolve","reject","res","err","arguments","pointerDown","STATE_RESIZE","STATE_DRAG","direction","getAttribute","rectContainer","getBoundingClientRect","rectContent","isAbsolute","position","top","left","limit","absolute","minTop","minLeft","maxTop","height","maxLeft","width","relative","bottom","right","resetBodyCursor","moving","offset","getResizeOffset","margin","touchAction","transform","end","setTimeout","setOffset","offsetAxis","dir","axis","edge","minEdge","getEdge","maxEdge","getOffsetAxis","edgeName","getDirectionInfo","isPositive","rectContentEdge","positionOffset","EdgeName","directions","_offset","split","directionInfo","$props","$setup","_createBlock","onKeydown","_createVNode","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave","toString","role","tabindex","onMouseup","_renderSlot","_ctx","styleInject","css","insertAt","head","getElementsByTagName","createElement","firstChild","insertBefore","styleSheet","cssText","createTextNode","methods","dynamicModals","beforeOpen","_this","$nextTick","isString","component","_mergeProps","id","_toHandlers","on","on_closed","$options","on_beforeOpen","on_opened","opened","slots","slot","innerHTML","defineApi","_modalComponent","args","allSettled","defaultModal","shallowReactive","assign","hide","names","hideAll","map","get","_setDefaultModal","modalComponent","bindApi","_component","defineModal","VueFinalModal","defineContainer","ModalsContainer","_count","_key","_componentName","_dynamicContainerName","defineVfm","_vfm","$vfm","installVfm","App","componentName","dynamicContainerName","defineProperty","config","globalProperties","provide","vfmPlugin","install","_options","pluginOptions"],"sources":["../lib/utils/focusTrap.js","../lib/utils/dragResize.js","../lib/utils/bodyScrollLock.js","../lib/VueFinalModal.vue","../lib/VueFinalModal.vue?vue&type=template&id=2836fdb5&lang.js","../node_modules/style-inject/dist/style-inject.es.js","../lib/ModalsContainer.vue","../lib/ModalsContainer.vue?vue&type=template&id=74d49173&lang.js","../lib/PluginCore.js","../lib/Plugin.js"],"sourcesContent":["// stolen from vue-js-modal\n\nconst FOCUSABLE_ELEMENTS_QUERY =\n  'button:not([disabled]), ' +\n  'select:not([disabled]), ' +\n  'a[href]:not([disabled]), ' +\n  'area[href]:not([disabled]), ' +\n  '[contentEditable=\"\"]:not([disabled]), ' +\n  '[contentEditable=\"true\"]:not([disabled]), ' +\n  '[contentEditable=\"TRUE\"]:not([disabled]), ' +\n  'textarea:not([disabled]), ' +\n  'iframe:not([disabled]), ' +\n  'input:not([disabled]), ' +\n  'summary:not([disabled]), ' +\n  '[tabindex]:not([tabindex=\"-1\"])'\n\nconst isTabPressed = event => {\n  return event.key === 'Tab' || event.keyCode === 9\n}\n\nconst querySelectorAll = (element, selector) => {\n  return [...(element.querySelectorAll(selector) || [])]\n}\n\nconst queryFocusableElements = element => {\n  return querySelectorAll(element, FOCUSABLE_ELEMENTS_QUERY)\n}\n\nconst isFocused = element => {\n  return element == document.activeElement\n}\n\nconst isNothingFocused = () => {\n  return !document.activeElement\n}\n\nclass FocusTrap {\n  constructor() {\n    this.root = null\n    this.elements = []\n\n    this.onKeyDown = this.onKeyDown.bind(this)\n    this.enable = this.enable.bind(this)\n    this.disable = this.disable.bind(this)\n    this.firstElement = this.firstElement.bind(this)\n    this.lastElement = this.lastElement.bind(this)\n  }\n\n  lastElement() {\n    return this.elements[this.elements.length - 1] || null\n  }\n\n  firstElement() {\n    return this.elements[0] || null\n  }\n\n  onKeyDown(event) {\n    if (!isTabPressed(event)) {\n      return\n    }\n\n    // SHIFT + TAB\n    if (event.shiftKey) {\n      if (isFocused(this.firstElement())) {\n        this.lastElement().focus()\n        event.preventDefault()\n      }\n      return\n    }\n\n    // TAB\n    if (isNothingFocused() || isFocused(this.lastElement())) {\n      this.firstElement().focus()\n      event.preventDefault()\n      return\n    }\n  }\n\n  enabled() {\n    return !!this.root\n  }\n\n  enable(root) {\n    if (!root) {\n      return\n    }\n\n    this.root = root\n    this.elements = queryFocusableElements(this.root)\n\n    this.root.addEventListener('keydown', this.onKeyDown)\n  }\n\n  disable() {\n    this.root.removeEventListener('keydown', this.onKeyDown)\n    this.root = null\n  }\n}\n\nexport default FocusTrap\n","export const setStyle = (el, key, value) => {\n  const cacheStyle = el.style[key]\n  el.style[key] = value\n  return () => {\n    el.style[key] = cacheStyle\n  }\n}\n\nexport const getPosition = e => {\n  const { clientX: x, clientY: y } = e.targetTouches ? e.targetTouches[0] : e\n  return { x, y }\n}\n\nexport const capitalize = s => {\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport const clamp = (min, num, max) => {\n  if (typeof min !== 'number') {\n    min = Math.min(num, max) || num\n  }\n  if (typeof max !== 'number') {\n    max = Math.max(num, min)\n  }\n  return Math.min(Math.max(num, min), max)\n}\n\nexport const trimPx = distance => {\n  return (distance && Number(distance.replace(/px$/, ''))) || 0\n}\n\nexport const validDragElement = (e, el, dragSelector) => {\n  if (dragSelector === '') return true\n  const list = [...el.querySelectorAll(dragSelector)]\n  return list.includes(e.target)\n}\n\nconst pointerType = {\n  down: {\n    pc: 'mousedown',\n    m: 'touchstart'\n  },\n  move: {\n    pc: 'mousemove',\n    m: 'touchmove'\n  },\n  up: {\n    pc: 'mouseup',\n    m: 'touchend'\n  }\n}\nexport const addListener = (type, el, callback) => {\n  el && el.addEventListener(pointerType[type].pc, callback)\n  el && el.addEventListener(pointerType[type].m, callback, { passive: false })\n}\nexport const removeListener = (type, el, callback) => {\n  el && el.removeEventListener(pointerType[type].pc, callback)\n  el && el.removeEventListener(pointerType[type].m, callback)\n}\n","// stolen from body-scroll-lock\n\n// Older browsers don't support event options, feature detect it.\nlet hasPassiveEvents = false\nif (typeof window !== 'undefined') {\n  const passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true\n      return undefined\n    }\n  }\n  window.addEventListener('testPassive', null, passiveTestOptions)\n  window.removeEventListener('testPassive', null, passiveTestOptions)\n}\n\nconst isIosDevice =\n  typeof window !== 'undefined' &&\n  window.navigator &&\n  window.navigator.platform &&\n  (/iP(ad|hone|od)/.test(window.navigator.platform) ||\n    (window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1))\n\nlet locks = []\nlet documentListenerAdded = false\nlet clientY = 0\nlet initialClientY = -1\nlet previousBodyOverflowSetting\nlet previousBodyPaddingRight\n\nconst hasScrollbar = el => {\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\n\n  const style = window.getComputedStyle(el)\n  return ['auto', 'scroll'].includes(style.overflowY) && el.scrollHeight > el.clientHeight\n}\n\nconst shouldScroll = (el, delta) => {\n  if (el.scrollTop === 0 && delta < 0) return false\n  if (el.scrollTop + el.clientHeight + delta >= el.scrollHeight && delta > 0) return false\n  return true\n}\n\nconst composedPath = el => {\n  const path = []\n  while (el) {\n    path.push(el)\n    if (el.classList.contains('vfm')) return path\n    el = el.parentElement\n  }\n  return path\n}\n\nconst hasAnyScrollableEl = (el, delta) => {\n  let hasAnyScrollableEl = false\n  const path = composedPath(el)\n  path.forEach(el => {\n    if (hasScrollbar(el) && shouldScroll(el, delta)) {\n      hasAnyScrollableEl = true\n    }\n  })\n  return hasAnyScrollableEl\n}\n\n// returns true if `el` should be allowed to receive touchmove events.\nconst allowTouchMove = el => locks.some(() => hasAnyScrollableEl(el, -clientY))\n\nconst preventDefault = rawEvent => {\n  const e = rawEvent || window.event\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true\n  }\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true\n\n  if (e.preventDefault) e.preventDefault()\n\n  return false\n}\n\nconst setOverflowHidden = options => {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    const reserveScrollBarGap = !!options && options.reserveScrollBarGap === true\n    const scrollBarGap = window.innerWidth - document.documentElement.clientWidth\n\n    if (reserveScrollBarGap && scrollBarGap > 0) {\n      const computedBodyPaddingRight = parseInt(getComputedStyle(document.body).getPropertyValue('padding-right'), 10)\n      previousBodyPaddingRight = document.body.style.paddingRight\n      document.body.style.paddingRight = `${computedBodyPaddingRight + scrollBarGap}px`\n    }\n  }\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow\n    document.body.style.overflow = 'hidden'\n  }\n}\n\nconst restoreOverflowSetting = () => {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined\n  }\n\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined\n  }\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nconst isTargetElementTotallyScrolled = targetElement =>\n  targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false\n\nconst handleScroll = (event, targetElement) => {\n  clientY = event.targetTouches[0].clientY - initialClientY\n\n  if (allowTouchMove(event.target)) {\n    return false\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event)\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event)\n  }\n\n  event.stopPropagation()\n  return true\n}\n\nexport const disableBodyScroll = (targetElement, options) => {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error(\n      'disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.'\n    )\n    return\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(lock => lock.targetElement === targetElement)) {\n    return\n  }\n\n  const lock = {\n    targetElement,\n    options: options || {}\n  }\n\n  locks = [...locks, lock]\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = event => {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY\n      }\n    }\n    targetElement.ontouchmove = event => {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement)\n      }\n    }\n\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined)\n      documentListenerAdded = true\n    }\n  } else {\n    setOverflowHidden(options)\n  }\n}\n\nexport const enableBodyScroll = targetElement => {\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error(\n      'enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.'\n    )\n    return\n  }\n\n  locks = locks.filter(lock => lock.targetElement !== targetElement)\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = null\n    targetElement.ontouchmove = null\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined)\n      documentListenerAdded = false\n    }\n  } else if (!locks.length) {\n    restoreOverflowSetting()\n  }\n}\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"bindStyle\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown.esc=\"onEsc\"\n  >\n    <transition\n      v-bind=\"computedOverlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-if=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      v-bind=\"computedTransition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @mouseup.self=\"onMouseupContainer\"\n        @mousedown.self=\"onMousedown\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"bindContentStyle\"\n          @mousedown=\"onMousedown(null)\"\n        >\n          <slot :params=\"params\" :close=\"() => $emit('update:modelValue', false)\" />\n          <div\n            v-if=\"visibility.resize && visibility.modal\"\n            ref=\"vfmResize\"\n            class=\"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none\"\n          >\n            <div\n              v-for=\"direction in resizeDirections\"\n              :key=\"direction\"\n              :direction=\"direction\"\n              :class=\"`vfm--resize-${direction}`\"\n              class=\"vfm--absolute vfm--prevent-auto\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n/* eslint-disable vue/no-mutating-props */\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\nimport {\n  setStyle,\n  getPosition,\n  capitalize,\n  clamp,\n  trimPx,\n  validDragElement,\n  addListener,\n  removeListener\n} from './utils/dragResize.js'\nimport { disableBodyScroll, enableBodyScroll } from './utils/bodyScrollLock'\n\nconst noop = () => {}\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nconst resizeCursor = {\n  t: 'ns-resize',\n  tr: 'nesw-resize',\n  r: 'ew-resize',\n  br: 'nwse-resize',\n  b: 'ns-resize',\n  bl: 'nesw-resize',\n  l: 'ew-resize',\n  tl: 'nwse-resize'\n}\n\nexport default {\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [Object, Array], default: () => ({}) },\n    overlayStyle: { type: [Object, Array], default: () => ({}) },\n    contentStyle: { type: [Object, Array], default: () => ({}) },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: [String, Object], default: 'vfm' },\n    overlayTransition: { type: [String, Object], default: 'vfm' },\n    keepOverlay: { type: Boolean, default: false },\n    zIndexAuto: { type: Boolean, default: true },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false },\n    fitParent: { type: Boolean, default: true },\n    drag: { type: Boolean, default: false },\n    dragSelector: { type: String, default: '' },\n    keepChangedStyle: { type: Boolean, default: false },\n    resize: {\n      type: Boolean,\n      default: false\n    },\n    resizeDirections: {\n      type: Array,\n      default: () => ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'],\n      validator: val =>\n        ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'].filter(value => val.indexOf(value) !== -1).length === val.length\n    },\n    minWidth: { type: Number, default: 0 },\n    minHeight: { type: Number, default: 0 },\n    maxWidth: { type: Number, default: Infinity },\n    maxHeight: { type: Number, default: Infinity }\n  },\n  emits: [\n    'update:modelValue',\n    'click-outside',\n    'before-open',\n    'opened',\n    'before-close',\n    'closed',\n    '_before-open',\n    '_opened',\n    '_closed',\n    'drag:start',\n    'drag:move',\n    'drag:end',\n    'resize:start',\n    'resize:move',\n    'resize:end'\n  ],\n  setup(props, { emit }) {\n    const uid = Symbol('vfm')\n    const root = ref(null)\n    const vfmContainer = ref(null)\n    const vfmContent = ref(null)\n    const vfmResize = ref(null)\n    const vfmOverlayTransition = ref(null)\n    const vfmTransition = ref(null)\n\n    const modalStackIndex = ref(null)\n    const $focusTrap = new FocusTrap()\n\n    const visible = ref(false)\n    const visibility = reactive({\n      modal: false,\n      overlay: false,\n      resize: false\n    })\n    const overlayTransitionState = ref(null)\n    const modalTransitionState = ref(null)\n    const _stopEvent = ref(false)\n    const params = ref({})\n    const dragResizeStyle = ref({})\n    const _state = ref(null)\n    const lastMousedownEl = ref(null)\n\n    let resolveToggle = noop\n    let rejectToggle = noop\n\n    const computedOverlayTransition = computed(() => {\n      if (typeof props.overlayTransition === 'string') return { name: props.overlayTransition }\n      return { ...props.overlayTransition }\n    })\n\n    const computedTransition = computed(() => {\n      if (typeof props.transition === 'string') return { name: props.transition }\n      return { ...props.transition }\n    })\n\n    const isComponentReadyToBeDestroyed = computed(() => {\n      return (\n        (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n        modalTransitionState.value === TransitionState.Leave\n      )\n    })\n\n    const calculateZIndex = computed(() => {\n      if (props.zIndex === false) {\n        if (props.zIndexAuto) {\n          return +props.zIndexBase + 2 * (modalStackIndex.value || 0)\n        } else {\n          return false\n        }\n      } else {\n        return props.zIndex\n      }\n    })\n\n    const bindStyle = computed(() => {\n      return {\n        ...(calculateZIndex.value !== false && {\n          zIndex: calculateZIndex.value\n        })\n      }\n    })\n\n    const bindContentStyle = computed(() => {\n      let style = [dragResizeStyle.value]\n      Array.isArray(props.contentStyle) ? style.push(...props.contentStyle) : style.push(props.contentStyle)\n      return style\n    })\n\n    watch(\n      () => props.modelValue,\n      value => {\n        if (_stopEvent.value) {\n          _stopEvent.value = false\n          return\n        }\n        mounted()\n        if (!value) {\n          if (emitEvent('before-close', true)) {\n            rejectToggle('hide')\n            return\n          }\n          close()\n        }\n      }\n    )\n    watch(() => props.lockScroll, handleLockScroll)\n    watch(\n      () => props.hideOverlay,\n      value => {\n        if (props.modelValue && !value) {\n          visibility.overlay = true\n        }\n      }\n    )\n    watch(() => props.attach, mounted)\n    watch(\n      isComponentReadyToBeDestroyed,\n      val => {\n        if (val) {\n          visible.value = false\n          vfmContainer.value.style.display = 'none'\n        }\n      },\n      {\n        flush: 'post'\n      }\n    )\n    watch(\n      () => props.drag,\n      val => {\n        if (visible.value) {\n          val ? addDragDown() : removeDragDown()\n        }\n      }\n    )\n    watch(\n      () => props.resize,\n      val => {\n        if (visible.value) {\n          val ? addResizeDown() : removeResizeDown()\n        }\n      }\n    )\n    watch(\n      () => props.keepChangedStyle,\n      val => {\n        if (!val) {\n          dragResizeStyle.value = {}\n        }\n      }\n    )\n\n    onMounted(() => {\n      props.api.modals.push(getModalInfo())\n      mounted()\n    })\n    onBeforeUnmount(() => {\n      close()\n      props.lockScroll && vfmContainer.value && enableBodyScroll(vfmContainer.value)\n      root?.value?.remove()\n\n      let index = props.api.modals.findIndex(vm => vm.uid === uid)\n\n      props.api.modals.splice(index, 1)\n    })\n    function getModalInfo() {\n      return {\n        uid,\n        props,\n        emit,\n        vfmContainer,\n        vfmContent,\n        vfmResize,\n        vfmOverlayTransition,\n        vfmTransition,\n        getAttachElement,\n        modalStackIndex,\n        visibility,\n        handleLockScroll,\n        $focusTrap,\n        toggle,\n        params\n      }\n    }\n    function mounted() {\n      if (props.modelValue) {\n        emit('_before-open', createModalEvent({ type: '_before-open' }))\n        if (emitEvent('before-open', false)) {\n          rejectToggle('show')\n          return\n        }\n\n        let target = getAttachElement()\n        if (target || props.attach === false) {\n          if (props.attach !== false) {\n            if (root.value) {\n              target.appendChild(root.value)\n            } else {\n              visible.value = true\n              nextTick(() => {\n                mounted()\n              })\n              return\n            }\n          }\n\n          let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n\n          if (index !== -1) {\n            // if this is already exist in modalStack, delete it\n            props.api.openedModals.splice(index, 1)\n          }\n          props.api.openedModals.push(getModalInfo())\n\n          modalStackIndex.value = props.api.openedModals.length - 1\n\n          handleLockScroll()\n\n          props.api.openedModals\n            .filter(vm => vm.uid !== uid)\n            .forEach((vm, index) => {\n              if (vm.getAttachElement() === target) {\n                // if vm and this have the same attach element\n                vm.modalStackIndex.value = index\n                !vm.props.keepOverlay && (vm.visibility.overlay = false)\n              }\n            })\n\n          visible.value = true\n          startTransitionEnter()\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach))\n        }\n      }\n    }\n    function close() {\n      let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n      if (index !== -1) {\n        // remove this in modalStack\n        props.api.openedModals.splice(index, 1)\n      }\n      if (props.api.openedModals.length > 0) {\n        // If there are still nested modals opened\n        const $_vm = props.api.openedModals[props.api.openedModals.length - 1]\n        $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus()\n        if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n          $_vm.vfmContainer.value.focus()\n        }\n        !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true)\n      }\n      props.drag && removeDragDown()\n      props.resize && removeResizeDown()\n      _state.value = null\n\n      startTransitionLeave()\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        nextTick(() => {\n          if (props.lockScroll) {\n            disableBodyScroll(vfmContainer.value, {\n              reserveScrollBarGap: true\n            })\n          } else {\n            enableBodyScroll(vfmContainer.value)\n          }\n        })\n      }\n    }\n    function getAttachElement() {\n      let target\n      if (props.attach === false) {\n        target = false\n      } else if (typeof props.attach === 'string') {\n        // CSS selector\n        if (window) {\n          target = window.document.querySelector(props.attach)\n        } else {\n          target = false\n        }\n      } else {\n        // DOM Element\n        target = props.attach\n      }\n      return target\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true\n      visibility.modal = true\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false\n      visibility.modal = false\n    }\n\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave\n    }\n    function beforeModalEnter() {\n      modalTransitionState.value = TransitionState.Entering\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus()\n      }\n      props.focusTrap && $focusTrap.enable(vfmContainer.value)\n      props.drag && addDragDown()\n      props.resize && addResizeDown()\n\n      emit('_opened')\n      emit('opened', createModalEvent({ type: 'opened' }))\n      resolveToggle('show')\n    }\n    function beforeModalLeave() {\n      modalTransitionState.value = TransitionState.Leaving\n\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable()\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave\n      modalStackIndex.value = null\n      props.lockScroll && enableBodyScroll(vfmContainer.value)\n      if (!props.keepChangedStyle) {\n        dragResizeStyle.value = {}\n      }\n\n      let stopEvent = false\n      const event = createModalEvent({\n        type: 'closed',\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit('_closed')\n      emit('closed', event)\n      resolveToggle('hide')\n      if (stopEvent) return\n      params.value = {}\n    }\n    function onMousedown(e) {\n      lastMousedownEl.value = e?.target\n    }\n    function onMouseupContainer() {\n      // skip when the lastMousedownEl didn't equal vfmContainer\n      if (lastMousedownEl.value !== vfmContainer.value) return\n      // skip when state equal 'resize:move'\n      if (_state.value === 'resize:move') return\n      emit('click-outside', createModalEvent({ type: 'click-outside' }))\n      props.clickToClose && emit('update:modelValue', false)\n    }\n    function onEsc() {\n      if (visible.value && props.escToClose) {\n        emit('update:modelValue', false)\n      }\n    }\n    function createModalEvent(eventProps = {}) {\n      return {\n        ref: getModalInfo(),\n        ...eventProps\n      }\n    }\n    function emitEvent(eventType, value) {\n      let stopEvent = false\n      const event = createModalEvent({\n        type: eventType,\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit(eventType, event)\n      if (stopEvent) {\n        _stopEvent.value = true\n        nextTick(() => {\n          emit('update:modelValue', value)\n        })\n        return true\n      }\n      return false\n    }\n    function emitState(e, state, action) {\n      _state.value = `${state}:${action}`\n      emit(_state.value, e)\n    }\n    function toggle(show, _params) {\n      return new Promise((resolve, reject) => {\n        resolveToggle = res => {\n          resolve(res)\n          resolveToggle = noop\n        }\n        rejectToggle = err => {\n          reject(err)\n          rejectToggle = noop\n        }\n        const value = typeof show === 'boolean' ? show : !props.modelValue\n        if (value && arguments.length === 2) {\n          params.value = _params\n        }\n        emit('update:modelValue', value)\n      })\n    }\n    function pointerDown(e) {\n      e.stopPropagation()\n      const STATE_RESIZE = 'resize'\n      const STATE_DRAG = 'drag'\n      const direction = e.target.getAttribute('direction')\n      let state\n      if (direction) {\n        state = STATE_RESIZE\n      } else if (validDragElement(e, vfmContent.value, props.dragSelector)) {\n        state = STATE_DRAG\n      } else {\n        return\n      }\n      emitState(e, state, 'start')\n      const down = getPosition(e)\n      const rectContainer = vfmContainer.value.getBoundingClientRect()\n      const rectContent = vfmContent.value.getBoundingClientRect()\n      const isAbsolute = window.getComputedStyle(vfmContent.value).position === 'absolute'\n      const position = {\n        top: trimPx(dragResizeStyle.value.top),\n        left: trimPx(dragResizeStyle.value.left)\n      }\n      const limit = (() => {\n        if (props.fitParent) {\n          const limit = {\n            absolute() {\n              return {\n                minTop: 0,\n                minLeft: 0,\n                maxTop: rectContainer.height - rectContent.height,\n                maxLeft: rectContainer.width - rectContent.width\n              }\n            },\n            relative() {\n              return {\n                minTop: position.top + rectContainer.top - rectContent.top,\n                minLeft: position.left + rectContainer.left - rectContent.left,\n                maxTop: position.top + rectContainer.bottom - rectContent.bottom,\n                maxLeft: position.left + rectContainer.right - rectContent.right\n              }\n            }\n          }\n          return isAbsolute ? limit.absolute() : limit.relative()\n        } else {\n          return {}\n        }\n      })()\n      const resetBodyCursor = state === STATE_RESIZE && setStyle(document.body, 'cursor', resizeCursor[direction])\n\n      const moving = e => {\n        // onPointerMove\n        e.stopPropagation()\n        emitState(e, state, 'move')\n        const move = getPosition(e)\n        let offset = {\n          x: move.x - down.x,\n          y: move.y - down.y\n        }\n        if (state === STATE_RESIZE) {\n          offset = getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute)\n        }\n\n        let top\n        let left\n        if (isAbsolute) {\n          top = rectContent.top - rectContainer.top + offset.y\n          left = rectContent.left - rectContainer.left + offset.x\n        } else {\n          top = position.top + offset.y\n          left = position.left + offset.x\n        }\n        if (state === STATE_DRAG && props.fitParent) {\n          top = clamp(limit.minTop, top, limit.maxTop)\n          left = clamp(limit.minLeft, left, limit.maxLeft)\n        }\n        const style = {\n          position: 'relative',\n          top: top + 'px',\n          left: left + 'px',\n          margin: 'unset',\n          touchAction: 'none',\n          ...(isAbsolute && {\n            position: 'absolute',\n            transform: 'unset',\n            width: rectContent.width + 'px',\n            height: rectContent.height + 'px'\n          }),\n          ...(offset.width && { width: offset.width + 'px' }),\n          ...(offset.height && { height: offset.height + 'px' })\n        }\n\n        dragResizeStyle.value = {\n          ...dragResizeStyle.value,\n          ...style\n        }\n      }\n      const end = e => {\n        // onPointerUp\n        e.stopPropagation()\n        if (state === STATE_RESIZE) {\n          resetBodyCursor && resetBodyCursor()\n        }\n        // Excute onMouseupContainer before trigger emitState\n        setTimeout(() => {\n          emitState(e, state, 'end')\n        })\n        removeListener('move', document, moving)\n        removeListener('up', document, end)\n      }\n      addListener('move', document, moving)\n      addListener('up', document, end)\n    }\n    function addDragDown() {\n      addListener('down', vfmContent.value, pointerDown)\n      dragResizeStyle.value.touchAction = 'none'\n    }\n    function removeDragDown() {\n      removeListener('down', vfmContent.value, pointerDown)\n    }\n    function addResizeDown() {\n      visibility.resize = true\n      nextTick(() => {\n        addListener('down', vfmResize.value, pointerDown)\n      })\n    }\n    function removeResizeDown() {\n      removeListener('down', vfmResize.value, pointerDown)\n      visibility.resize = false\n    }\n    function getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute) {\n      const setOffset = dir => {\n        let offsetAxis = offset[dir.axis]\n        offsetAxis = props.fitParent ? clamp(dir.min, offsetAxis, dir.max) : offsetAxis\n        let edge = clamp(dir.minEdge, dir.getEdge(offsetAxis), dir.maxEdge)\n        offsetAxis = dir.getOffsetAxis(edge, isAbsolute)\n        return {\n          [dir.edgeName]: edge,\n          [dir.axis]: offsetAxis\n        }\n      }\n\n      const getDirectionInfo = (position, edgeName, axis, isPositive) => {\n        const rectContentEdge = rectContent[edgeName]\n        const positionOffset = rectContainer[position] - rectContent[position]\n        const EdgeName = capitalize(edgeName)\n        return {\n          axis,\n          edgeName,\n          min: isPositive ? positionOffset : -rectContentEdge,\n          max: isPositive ? rectContentEdge : positionOffset,\n          minEdge: props[`min${EdgeName}`],\n          maxEdge: props[`max${EdgeName}`],\n          getEdge: offsetAxis => rectContent[edgeName] - offsetAxis * (isPositive ? 1 : -1),\n          getOffsetAxis: (edge, isAbsolute) => {\n            const offsetAxis = rectContent[edgeName] - edge\n            if (isAbsolute) {\n              return isPositive ? offsetAxis : 0\n            } else {\n              return ((isPositive ? 1 : -1) * offsetAxis) / 2\n            }\n          }\n        }\n      }\n\n      const directions = {\n        t: ['top', 'height', 'y', true],\n        b: ['bottom', 'height', 'y', false],\n        l: ['left', 'width', 'x', true],\n        r: ['right', 'width', 'x', false]\n      }\n\n      let _offset = { x: 0, y: 0 }\n      direction.split('').forEach(dir => {\n        const directionInfo = getDirectionInfo(...directions[dir])\n        _offset = {\n          ..._offset,\n          ...setOffset(directionInfo)\n        }\n      })\n      return _offset\n    }\n    return {\n      root,\n      vfmContainer,\n      vfmContent,\n      vfmResize,\n      vfmOverlayTransition,\n      vfmTransition,\n      computedOverlayTransition,\n      computedTransition,\n      visible,\n      visibility,\n      params,\n      calculateZIndex,\n      bindStyle,\n      bindContentStyle,\n      beforeOverlayEnter,\n      afterOverlayEnter,\n      beforeOverlayLeave,\n      afterOverlayLeave,\n      beforeModalEnter,\n      afterModalEnter,\n      beforeModalLeave,\n      afterModalLeave,\n      onMousedown,\n      onMouseupContainer,\n      onEsc\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n\n.vfm--touch-none {\n  touch-action: none;\n}\n.vfm--select-none {\n  user-select: none;\n}\n\n.vfm--resize-tr,\n.vfm--resize-br,\n.vfm--resize-bl,\n.vfm--resize-tl {\n  width: 12px;\n  height: 12px;\n  z-index: 10;\n}\n\n.vfm--resize-t {\n  top: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-tr {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-r {\n  top: 0;\n  right: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-br {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.vfm--resize-b {\n  bottom: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-bl {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-l {\n  top: 0;\n  left: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-tl {\n  top: -6px;\n  left: -6px;\n  cursor: nwse-resize;\n}\n</style>\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"bindStyle\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown.esc=\"onEsc\"\n  >\n    <transition\n      v-bind=\"computedOverlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-if=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      v-bind=\"computedTransition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @mouseup.self=\"onMouseupContainer\"\n        @mousedown.self=\"onMousedown\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"bindContentStyle\"\n          @mousedown=\"onMousedown(null)\"\n        >\n          <slot :params=\"params\" :close=\"() => $emit('update:modelValue', false)\" />\n          <div\n            v-if=\"visibility.resize && visibility.modal\"\n            ref=\"vfmResize\"\n            class=\"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none\"\n          >\n            <div\n              v-for=\"direction in resizeDirections\"\n              :key=\"direction\"\n              :direction=\"direction\"\n              :class=\"`vfm--resize-${direction}`\"\n              class=\"vfm--absolute vfm--prevent-auto\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n/* eslint-disable vue/no-mutating-props */\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\nimport {\n  setStyle,\n  getPosition,\n  capitalize,\n  clamp,\n  trimPx,\n  validDragElement,\n  addListener,\n  removeListener\n} from './utils/dragResize.js'\nimport { disableBodyScroll, enableBodyScroll } from './utils/bodyScrollLock'\n\nconst noop = () => {}\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nconst resizeCursor = {\n  t: 'ns-resize',\n  tr: 'nesw-resize',\n  r: 'ew-resize',\n  br: 'nwse-resize',\n  b: 'ns-resize',\n  bl: 'nesw-resize',\n  l: 'ew-resize',\n  tl: 'nwse-resize'\n}\n\nexport default {\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [Object, Array], default: () => ({}) },\n    overlayStyle: { type: [Object, Array], default: () => ({}) },\n    contentStyle: { type: [Object, Array], default: () => ({}) },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: [String, Object], default: 'vfm' },\n    overlayTransition: { type: [String, Object], default: 'vfm' },\n    keepOverlay: { type: Boolean, default: false },\n    zIndexAuto: { type: Boolean, default: true },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false },\n    fitParent: { type: Boolean, default: true },\n    drag: { type: Boolean, default: false },\n    dragSelector: { type: String, default: '' },\n    keepChangedStyle: { type: Boolean, default: false },\n    resize: {\n      type: Boolean,\n      default: false\n    },\n    resizeDirections: {\n      type: Array,\n      default: () => ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'],\n      validator: val =>\n        ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'].filter(value => val.indexOf(value) !== -1).length === val.length\n    },\n    minWidth: { type: Number, default: 0 },\n    minHeight: { type: Number, default: 0 },\n    maxWidth: { type: Number, default: Infinity },\n    maxHeight: { type: Number, default: Infinity }\n  },\n  emits: [\n    'update:modelValue',\n    'click-outside',\n    'before-open',\n    'opened',\n    'before-close',\n    'closed',\n    '_before-open',\n    '_opened',\n    '_closed',\n    'drag:start',\n    'drag:move',\n    'drag:end',\n    'resize:start',\n    'resize:move',\n    'resize:end'\n  ],\n  setup(props, { emit }) {\n    const uid = Symbol('vfm')\n    const root = ref(null)\n    const vfmContainer = ref(null)\n    const vfmContent = ref(null)\n    const vfmResize = ref(null)\n    const vfmOverlayTransition = ref(null)\n    const vfmTransition = ref(null)\n\n    const modalStackIndex = ref(null)\n    const $focusTrap = new FocusTrap()\n\n    const visible = ref(false)\n    const visibility = reactive({\n      modal: false,\n      overlay: false,\n      resize: false\n    })\n    const overlayTransitionState = ref(null)\n    const modalTransitionState = ref(null)\n    const _stopEvent = ref(false)\n    const params = ref({})\n    const dragResizeStyle = ref({})\n    const _state = ref(null)\n    const lastMousedownEl = ref(null)\n\n    let resolveToggle = noop\n    let rejectToggle = noop\n\n    const computedOverlayTransition = computed(() => {\n      if (typeof props.overlayTransition === 'string') return { name: props.overlayTransition }\n      return { ...props.overlayTransition }\n    })\n\n    const computedTransition = computed(() => {\n      if (typeof props.transition === 'string') return { name: props.transition }\n      return { ...props.transition }\n    })\n\n    const isComponentReadyToBeDestroyed = computed(() => {\n      return (\n        (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n        modalTransitionState.value === TransitionState.Leave\n      )\n    })\n\n    const calculateZIndex = computed(() => {\n      if (props.zIndex === false) {\n        if (props.zIndexAuto) {\n          return +props.zIndexBase + 2 * (modalStackIndex.value || 0)\n        } else {\n          return false\n        }\n      } else {\n        return props.zIndex\n      }\n    })\n\n    const bindStyle = computed(() => {\n      return {\n        ...(calculateZIndex.value !== false && {\n          zIndex: calculateZIndex.value\n        })\n      }\n    })\n\n    const bindContentStyle = computed(() => {\n      let style = [dragResizeStyle.value]\n      Array.isArray(props.contentStyle) ? style.push(...props.contentStyle) : style.push(props.contentStyle)\n      return style\n    })\n\n    watch(\n      () => props.modelValue,\n      value => {\n        if (_stopEvent.value) {\n          _stopEvent.value = false\n          return\n        }\n        mounted()\n        if (!value) {\n          if (emitEvent('before-close', true)) {\n            rejectToggle('hide')\n            return\n          }\n          close()\n        }\n      }\n    )\n    watch(() => props.lockScroll, handleLockScroll)\n    watch(\n      () => props.hideOverlay,\n      value => {\n        if (props.modelValue && !value) {\n          visibility.overlay = true\n        }\n      }\n    )\n    watch(() => props.attach, mounted)\n    watch(\n      isComponentReadyToBeDestroyed,\n      val => {\n        if (val) {\n          visible.value = false\n          vfmContainer.value.style.display = 'none'\n        }\n      },\n      {\n        flush: 'post'\n      }\n    )\n    watch(\n      () => props.drag,\n      val => {\n        if (visible.value) {\n          val ? addDragDown() : removeDragDown()\n        }\n      }\n    )\n    watch(\n      () => props.resize,\n      val => {\n        if (visible.value) {\n          val ? addResizeDown() : removeResizeDown()\n        }\n      }\n    )\n    watch(\n      () => props.keepChangedStyle,\n      val => {\n        if (!val) {\n          dragResizeStyle.value = {}\n        }\n      }\n    )\n\n    onMounted(() => {\n      props.api.modals.push(getModalInfo())\n      mounted()\n    })\n    onBeforeUnmount(() => {\n      close()\n      props.lockScroll && vfmContainer.value && enableBodyScroll(vfmContainer.value)\n      root?.value?.remove()\n\n      let index = props.api.modals.findIndex(vm => vm.uid === uid)\n\n      props.api.modals.splice(index, 1)\n    })\n    function getModalInfo() {\n      return {\n        uid,\n        props,\n        emit,\n        vfmContainer,\n        vfmContent,\n        vfmResize,\n        vfmOverlayTransition,\n        vfmTransition,\n        getAttachElement,\n        modalStackIndex,\n        visibility,\n        handleLockScroll,\n        $focusTrap,\n        toggle,\n        params\n      }\n    }\n    function mounted() {\n      if (props.modelValue) {\n        emit('_before-open', createModalEvent({ type: '_before-open' }))\n        if (emitEvent('before-open', false)) {\n          rejectToggle('show')\n          return\n        }\n\n        let target = getAttachElement()\n        if (target || props.attach === false) {\n          if (props.attach !== false) {\n            if (root.value) {\n              target.appendChild(root.value)\n            } else {\n              visible.value = true\n              nextTick(() => {\n                mounted()\n              })\n              return\n            }\n          }\n\n          let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n\n          if (index !== -1) {\n            // if this is already exist in modalStack, delete it\n            props.api.openedModals.splice(index, 1)\n          }\n          props.api.openedModals.push(getModalInfo())\n\n          modalStackIndex.value = props.api.openedModals.length - 1\n\n          handleLockScroll()\n\n          props.api.openedModals\n            .filter(vm => vm.uid !== uid)\n            .forEach((vm, index) => {\n              if (vm.getAttachElement() === target) {\n                // if vm and this have the same attach element\n                vm.modalStackIndex.value = index\n                !vm.props.keepOverlay && (vm.visibility.overlay = false)\n              }\n            })\n\n          visible.value = true\n          startTransitionEnter()\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach))\n        }\n      }\n    }\n    function close() {\n      let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n      if (index !== -1) {\n        // remove this in modalStack\n        props.api.openedModals.splice(index, 1)\n      }\n      if (props.api.openedModals.length > 0) {\n        // If there are still nested modals opened\n        const $_vm = props.api.openedModals[props.api.openedModals.length - 1]\n        $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus()\n        if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n          $_vm.vfmContainer.value.focus()\n        }\n        !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true)\n      }\n      props.drag && removeDragDown()\n      props.resize && removeResizeDown()\n      _state.value = null\n\n      startTransitionLeave()\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        nextTick(() => {\n          if (props.lockScroll) {\n            disableBodyScroll(vfmContainer.value, {\n              reserveScrollBarGap: true\n            })\n          } else {\n            enableBodyScroll(vfmContainer.value)\n          }\n        })\n      }\n    }\n    function getAttachElement() {\n      let target\n      if (props.attach === false) {\n        target = false\n      } else if (typeof props.attach === 'string') {\n        // CSS selector\n        if (window) {\n          target = window.document.querySelector(props.attach)\n        } else {\n          target = false\n        }\n      } else {\n        // DOM Element\n        target = props.attach\n      }\n      return target\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true\n      visibility.modal = true\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false\n      visibility.modal = false\n    }\n\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave\n    }\n    function beforeModalEnter() {\n      modalTransitionState.value = TransitionState.Entering\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus()\n      }\n      props.focusTrap && $focusTrap.enable(vfmContainer.value)\n      props.drag && addDragDown()\n      props.resize && addResizeDown()\n\n      emit('_opened')\n      emit('opened', createModalEvent({ type: 'opened' }))\n      resolveToggle('show')\n    }\n    function beforeModalLeave() {\n      modalTransitionState.value = TransitionState.Leaving\n\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable()\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave\n      modalStackIndex.value = null\n      props.lockScroll && enableBodyScroll(vfmContainer.value)\n      if (!props.keepChangedStyle) {\n        dragResizeStyle.value = {}\n      }\n\n      let stopEvent = false\n      const event = createModalEvent({\n        type: 'closed',\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit('_closed')\n      emit('closed', event)\n      resolveToggle('hide')\n      if (stopEvent) return\n      params.value = {}\n    }\n    function onMousedown(e) {\n      lastMousedownEl.value = e?.target\n    }\n    function onMouseupContainer() {\n      // skip when the lastMousedownEl didn't equal vfmContainer\n      if (lastMousedownEl.value !== vfmContainer.value) return\n      // skip when state equal 'resize:move'\n      if (_state.value === 'resize:move') return\n      emit('click-outside', createModalEvent({ type: 'click-outside' }))\n      props.clickToClose && emit('update:modelValue', false)\n    }\n    function onEsc() {\n      if (visible.value && props.escToClose) {\n        emit('update:modelValue', false)\n      }\n    }\n    function createModalEvent(eventProps = {}) {\n      return {\n        ref: getModalInfo(),\n        ...eventProps\n      }\n    }\n    function emitEvent(eventType, value) {\n      let stopEvent = false\n      const event = createModalEvent({\n        type: eventType,\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit(eventType, event)\n      if (stopEvent) {\n        _stopEvent.value = true\n        nextTick(() => {\n          emit('update:modelValue', value)\n        })\n        return true\n      }\n      return false\n    }\n    function emitState(e, state, action) {\n      _state.value = `${state}:${action}`\n      emit(_state.value, e)\n    }\n    function toggle(show, _params) {\n      return new Promise((resolve, reject) => {\n        resolveToggle = res => {\n          resolve(res)\n          resolveToggle = noop\n        }\n        rejectToggle = err => {\n          reject(err)\n          rejectToggle = noop\n        }\n        const value = typeof show === 'boolean' ? show : !props.modelValue\n        if (value && arguments.length === 2) {\n          params.value = _params\n        }\n        emit('update:modelValue', value)\n      })\n    }\n    function pointerDown(e) {\n      e.stopPropagation()\n      const STATE_RESIZE = 'resize'\n      const STATE_DRAG = 'drag'\n      const direction = e.target.getAttribute('direction')\n      let state\n      if (direction) {\n        state = STATE_RESIZE\n      } else if (validDragElement(e, vfmContent.value, props.dragSelector)) {\n        state = STATE_DRAG\n      } else {\n        return\n      }\n      emitState(e, state, 'start')\n      const down = getPosition(e)\n      const rectContainer = vfmContainer.value.getBoundingClientRect()\n      const rectContent = vfmContent.value.getBoundingClientRect()\n      const isAbsolute = window.getComputedStyle(vfmContent.value).position === 'absolute'\n      const position = {\n        top: trimPx(dragResizeStyle.value.top),\n        left: trimPx(dragResizeStyle.value.left)\n      }\n      const limit = (() => {\n        if (props.fitParent) {\n          const limit = {\n            absolute() {\n              return {\n                minTop: 0,\n                minLeft: 0,\n                maxTop: rectContainer.height - rectContent.height,\n                maxLeft: rectContainer.width - rectContent.width\n              }\n            },\n            relative() {\n              return {\n                minTop: position.top + rectContainer.top - rectContent.top,\n                minLeft: position.left + rectContainer.left - rectContent.left,\n                maxTop: position.top + rectContainer.bottom - rectContent.bottom,\n                maxLeft: position.left + rectContainer.right - rectContent.right\n              }\n            }\n          }\n          return isAbsolute ? limit.absolute() : limit.relative()\n        } else {\n          return {}\n        }\n      })()\n      const resetBodyCursor = state === STATE_RESIZE && setStyle(document.body, 'cursor', resizeCursor[direction])\n\n      const moving = e => {\n        // onPointerMove\n        e.stopPropagation()\n        emitState(e, state, 'move')\n        const move = getPosition(e)\n        let offset = {\n          x: move.x - down.x,\n          y: move.y - down.y\n        }\n        if (state === STATE_RESIZE) {\n          offset = getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute)\n        }\n\n        let top\n        let left\n        if (isAbsolute) {\n          top = rectContent.top - rectContainer.top + offset.y\n          left = rectContent.left - rectContainer.left + offset.x\n        } else {\n          top = position.top + offset.y\n          left = position.left + offset.x\n        }\n        if (state === STATE_DRAG && props.fitParent) {\n          top = clamp(limit.minTop, top, limit.maxTop)\n          left = clamp(limit.minLeft, left, limit.maxLeft)\n        }\n        const style = {\n          position: 'relative',\n          top: top + 'px',\n          left: left + 'px',\n          margin: 'unset',\n          touchAction: 'none',\n          ...(isAbsolute && {\n            position: 'absolute',\n            transform: 'unset',\n            width: rectContent.width + 'px',\n            height: rectContent.height + 'px'\n          }),\n          ...(offset.width && { width: offset.width + 'px' }),\n          ...(offset.height && { height: offset.height + 'px' })\n        }\n\n        dragResizeStyle.value = {\n          ...dragResizeStyle.value,\n          ...style\n        }\n      }\n      const end = e => {\n        // onPointerUp\n        e.stopPropagation()\n        if (state === STATE_RESIZE) {\n          resetBodyCursor && resetBodyCursor()\n        }\n        // Excute onMouseupContainer before trigger emitState\n        setTimeout(() => {\n          emitState(e, state, 'end')\n        })\n        removeListener('move', document, moving)\n        removeListener('up', document, end)\n      }\n      addListener('move', document, moving)\n      addListener('up', document, end)\n    }\n    function addDragDown() {\n      addListener('down', vfmContent.value, pointerDown)\n      dragResizeStyle.value.touchAction = 'none'\n    }\n    function removeDragDown() {\n      removeListener('down', vfmContent.value, pointerDown)\n    }\n    function addResizeDown() {\n      visibility.resize = true\n      nextTick(() => {\n        addListener('down', vfmResize.value, pointerDown)\n      })\n    }\n    function removeResizeDown() {\n      removeListener('down', vfmResize.value, pointerDown)\n      visibility.resize = false\n    }\n    function getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute) {\n      const setOffset = dir => {\n        let offsetAxis = offset[dir.axis]\n        offsetAxis = props.fitParent ? clamp(dir.min, offsetAxis, dir.max) : offsetAxis\n        let edge = clamp(dir.minEdge, dir.getEdge(offsetAxis), dir.maxEdge)\n        offsetAxis = dir.getOffsetAxis(edge, isAbsolute)\n        return {\n          [dir.edgeName]: edge,\n          [dir.axis]: offsetAxis\n        }\n      }\n\n      const getDirectionInfo = (position, edgeName, axis, isPositive) => {\n        const rectContentEdge = rectContent[edgeName]\n        const positionOffset = rectContainer[position] - rectContent[position]\n        const EdgeName = capitalize(edgeName)\n        return {\n          axis,\n          edgeName,\n          min: isPositive ? positionOffset : -rectContentEdge,\n          max: isPositive ? rectContentEdge : positionOffset,\n          minEdge: props[`min${EdgeName}`],\n          maxEdge: props[`max${EdgeName}`],\n          getEdge: offsetAxis => rectContent[edgeName] - offsetAxis * (isPositive ? 1 : -1),\n          getOffsetAxis: (edge, isAbsolute) => {\n            const offsetAxis = rectContent[edgeName] - edge\n            if (isAbsolute) {\n              return isPositive ? offsetAxis : 0\n            } else {\n              return ((isPositive ? 1 : -1) * offsetAxis) / 2\n            }\n          }\n        }\n      }\n\n      const directions = {\n        t: ['top', 'height', 'y', true],\n        b: ['bottom', 'height', 'y', false],\n        l: ['left', 'width', 'x', true],\n        r: ['right', 'width', 'x', false]\n      }\n\n      let _offset = { x: 0, y: 0 }\n      direction.split('').forEach(dir => {\n        const directionInfo = getDirectionInfo(...directions[dir])\n        _offset = {\n          ..._offset,\n          ...setOffset(directionInfo)\n        }\n      })\n      return _offset\n    }\n    return {\n      root,\n      vfmContainer,\n      vfmContent,\n      vfmResize,\n      vfmOverlayTransition,\n      vfmTransition,\n      computedOverlayTransition,\n      computedTransition,\n      visible,\n      visibility,\n      params,\n      calculateZIndex,\n      bindStyle,\n      bindContentStyle,\n      beforeOverlayEnter,\n      afterOverlayEnter,\n      beforeOverlayLeave,\n      afterOverlayLeave,\n      beforeModalEnter,\n      afterModalEnter,\n      beforeModalLeave,\n      afterModalLeave,\n      onMousedown,\n      onMouseupContainer,\n      onEsc\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n\n.vfm--touch-none {\n  touch-action: none;\n}\n.vfm--select-none {\n  user-select: none;\n}\n\n.vfm--resize-tr,\n.vfm--resize-br,\n.vfm--resize-bl,\n.vfm--resize-tl {\n  width: 12px;\n  height: 12px;\n  z-index: 10;\n}\n\n.vfm--resize-t {\n  top: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-tr {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-r {\n  top: 0;\n  right: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-br {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.vfm--resize-b {\n  bottom: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-bl {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-l {\n  top: 0;\n  left: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-tl {\n  top: -6px;\n  left: -6px;\n  cursor: nwse-resize;\n}\n</style>\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<template>\n  <div class=\"modals-container\">\n    <component\n      :is=\"modal.component\"\n      v-for=\"(modal, index) in api.dynamicModals\"\n      :key=\"modal.id\"\n      v-bind=\"modal.bind\"\n      v-model=\"modal.value\"\n      v-on=\"modal.on\"\n      @_closed=\"slice(index)\"\n      @_beforeOpen=\"e => beforeOpen(e, modal)\"\n      @_opened=\"modal.opened\"\n    >\n      <template v-for=\"(slot, key) in modal.slots\" #[key] :key=\"key\">\n        <!-- eslint-disable vue/no-v-html -->\n        <div v-if=\"isString(slot)\" v-html=\"slot\"></div>\n        <component :is=\"slot.component\" v-else v-bind=\"slot.bind\" v-on=\"slot.on || {}\" />\n      </template>\n    </component>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {},\n  methods: {\n    slice(index) {\n      this.api.dynamicModals.splice(index, 1)\n    },\n    async beforeOpen(e, modal, index) {\n      e.ref.params.value = modal.params\n      await this.$nextTick()\n      await this.$nextTick()\n      if (!modal.value) {\n        this.slice(index)\n        modal.reject('show')\n      }\n    },\n    isString(val) {\n      return typeof val === 'string'\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"modals-container\">\n    <component\n      :is=\"modal.component\"\n      v-for=\"(modal, index) in api.dynamicModals\"\n      :key=\"modal.id\"\n      v-bind=\"modal.bind\"\n      v-model=\"modal.value\"\n      v-on=\"modal.on\"\n      @_closed=\"slice(index)\"\n      @_beforeOpen=\"e => beforeOpen(e, modal)\"\n      @_opened=\"modal.opened\"\n    >\n      <template v-for=\"(slot, key) in modal.slots\" #[key] :key=\"key\">\n        <!-- eslint-disable vue/no-v-html -->\n        <div v-if=\"isString(slot)\" v-html=\"slot\"></div>\n        <component :is=\"slot.component\" v-else v-bind=\"slot.bind\" v-on=\"slot.on || {}\" />\n      </template>\n    </component>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {},\n  methods: {\n    slice(index) {\n      this.api.dynamicModals.splice(index, 1)\n    },\n    async beforeOpen(e, modal, index) {\n      e.ref.params.value = modal.params\n      await this.$nextTick()\n      await this.$nextTick()\n      if (!modal.value) {\n        this.slice(index)\n        modal.reject('show')\n      }\n    },\n    isString(val) {\n      return typeof val === 'string'\n    }\n  }\n}\n</script>\n","import VueFinalModal from './VueFinalModal.vue'\nimport ModalsContainer from './ModalsContainer.vue'\nimport { shallowReactive } from 'vue'\n\nexport function defineApi() {\n  let _modalComponent = null\n\n  return {\n    show(modal, ...args) {\n      switch (typeof modal) {\n        case 'string':\n          return this.toggle(modal, true, ...args)\n        case 'object': {\n          return Promise.allSettled([\n            new Promise((resolve, reject) => {\n              const defaultModal = {\n                value: true,\n                id: Symbol('dynamicModal'),\n                component: _modalComponent,\n                bind: {},\n                slots: {},\n                on: {},\n                params: args[0],\n                reject,\n                opened() {\n                  resolve('show')\n                }\n              }\n              this.dynamicModals.push(shallowReactive(Object.assign(defaultModal, modal)))\n            })\n          ])\n        }\n      }\n    },\n    hide(...names) {\n      return this.toggle(names, false)\n    },\n    hideAll() {\n      return this.hide(...this.openedModals.map(modal => modal.props.name))\n    },\n    toggle(name, ...args) {\n      const modals = Array.isArray(name) ? this.get(...name) : this.get(name)\n      return Promise.allSettled(modals.map(modal => modal.toggle(...args)))\n    },\n    get(...names) {\n      return this.modals.filter(modal => names.includes(modal.props.name))\n    },\n    dynamicModals: shallowReactive([]),\n    openedModals: [],\n    modals: [],\n    _setDefaultModal(modalComponent) {\n      _modalComponent = modalComponent\n    }\n  }\n}\n\nfunction bindApi(component, api) {\n  const _component = { ...component, props: { ...component.props } }\n  Object.assign(_component.props, {\n    api: { type: Object, default: () => api }\n  })\n  return _component\n}\n\nexport function defineModal(api) {\n  const modalComponent = bindApi(VueFinalModal, api)\n  api._setDefaultModal(modalComponent)\n  return modalComponent\n}\n\nexport function defineContainer(api) {\n  return bindApi(ModalsContainer, api)\n}\n","import { defineApi, defineModal, defineContainer } from './PluginCore'\n\n/**\n * @description Ensure that `_vfm` is used when function `installPlugin` is executed for the first time\n */\nlet _count = 0\n\nconst _key = '$vfm'\nconst _componentName = 'VueFinalModal'\nconst _dynamicContainerName = 'ModalsContainer'\n\n/**\n * @description Support create multiple vfm instance\n */\nexport const defineVfm = () => {\n  let api = defineApi()\n  return {\n    [_key]: api,\n    [_componentName]: defineModal(api),\n    [_dynamicContainerName]: defineContainer(api)\n  }\n}\n\n/**\n * @description Create a vfm instance by default for directly support `import { $vfm, VueFinalModal, ModalsContainer } from 'vue-final-modal'`\n */\nconst _vfm = defineVfm()\nexport const { $vfm, VueFinalModal, ModalsContainer } = _vfm\n\n/**\n * @description Register vfm instance globally\n * @deprecated not available in vue-final-modal 4\n */\nconst installVfm = (App, options = {}) => {\n  const { $vfm, VueFinalModal, ModalsContainer } = _count === 0 ? _vfm : defineVfm()\n  _count += 1\n  const key = options.key || _key\n  const componentName = options.componentName || _componentName\n  const dynamicContainerName = options.dynamicContainerName || _dynamicContainerName\n  Object.defineProperty(App.config.globalProperties, key, {\n    get() {\n      return $vfm\n    }\n  })\n  App.provide(key, $vfm)\n  App.component(componentName, VueFinalModal)\n  App.component(dynamicContainerName, ModalsContainer)\n}\n\n/**\n * @description Vue plugin for register vfm instance globally\n * @deprecated not available in vue-final-modal 4\n */\nexport const vfmPlugin = pluginOptions => ({\n  install(App, options) {\n    const _options = Object.assign({}, pluginOptions, options)\n    installVfm(App, _options)\n  }\n})\n\nvfmPlugin.install = installVfm\n"]},"metadata":{},"sourceType":"module"}