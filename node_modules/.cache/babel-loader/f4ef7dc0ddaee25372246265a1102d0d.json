{"ast":null,"code":"import { ref } from \"vue\";\nexport default {\n  name: \"Ctrl_panel\",\n  props: ['canUpdate'],\n  emits: ['subscribeToFields', 'updateData'],\n  setup(props, _ref) {\n    let {\n      emit\n    } = _ref;\n    let dataObject = ref({});\n    let initialized = ref(false);\n    let requiredFields = {};\n    emit(\"subscribeToFields\", requiredFields);\n    setInterval(() => {\n      if (props.canUpdate) {\n        emit(\"updateData\", requiredFields, dataObject);\n        if (!initialized.value) initialized.value = true;\n      }\n    }, 1000);\n    return {\n      dataObject,\n      initialized\n    };\n  }\n};","map":{"version":3,"mappings":"AA4WA,SAAQA,GAAG,QAAO,KAAK;AAEvB,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,KAAK,EAAE,CAAC,WAAW,CAAC;EACpBC,KAAK,EAAE,CAAC,mBAAmB,EAAE,YAAY,CAAC;EAE1CC,KAAK,CAACF,KAAK,QAAU;IAAA,IAAR;MAACG;IAAI,CAAC;IACjB,IAAIC,UAAS,GAAIN,GAAG,CAAC,CAAC,CAAC;IACvB,IAAIO,WAAU,GAAIP,GAAG,CAAC,KAAK;IAE3B,IAAIQ,cAAa,GAAI,CACrB;IAEAH,IAAI,CAAC,mBAAmB,EAAEG,cAAc;IAExCC,WAAW,CAAE,MAAI;MACf,IAAIP,KAAK,CAACQ,SAAS,EAAE;QACnBL,IAAI,CAAC,YAAY,EAAEG,cAAc,EAAEF,UAAU;QAC7C,IAAG,CAACC,WAAW,CAACI,KAAK,EAAEJ,WAAW,CAACI,KAAI,GAAI,IAAG;MAChD;IACF,GAAI,IAAI;IAER,OAAO;MAACL,UAAU;MAAEC;IAAW;EACjC;AACF","names":["ref","name","props","emits","setup","emit","dataObject","initialized","requiredFields","setInterval","canUpdate","value"],"sourceRoot":"","sources":["/home/davidf/Desktop/SSB/ssb-interface-v2/src/components/Home/Ctrl_panel.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <p class=\"mb-1\">Change parameters</p>\n        <b-button-group class=\"d-flex\">\n          <b-button v-b-modal.fcu-parameters-sel-modal>FCU</b-button>\n          <b-button v-b-modal.maxon-modal>Maxon</b-button>\n          <b-button v-b-modal.battery-modal>Battery</b-button>\n        </b-button-group>\n      </div>\n      <div class=\"col-sm-6\">\n        <p class=\"mb-1\">Raspberry</p>\n        <b-button-group class=\"d-flex\">\n          <b-button @click=\"doAction({ action: 'Poweroff' })\" variant=\"danger\"\n          >Power off</b-button\n          >\n        </b-button-group>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <p class=\"mt-2 mb-1\">Maxon Clear Error</p>\n        <b-button-group class=\"d-flex\">\n          <b-button @click=\"maxonClearErrorGlobal\" variant=\"danger\"\n          >Clear Error</b-button\n          >\n        </b-button-group>\n      </div>\n      <div class=\"col-sm-6\">\n        <p class=\"mt-2 mb-1\">Configurations</p>\n        <b-button-group class=\"d-flex\">\n          <b-button v-b-modal.configuration-modal>Control</b-button>\n        </b-button-group>\n      </div>\n    </div>\n\n    <p class=\"mt-2 mb-1\">Logging</p>\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <b-button-group class=\"d-flex\">\n          <b-button @click=\"doAction({ action: 'StartLogging' })\" variant=\"info\"\n          >Start</b-button\n          >\n          <b-button\n              @click=\"doAction({ action: 'StopLogging' })\"\n              variant=\"warning\"\n          >Stop</b-button\n          >\n        </b-button-group>\n      </div>\n      <div class=\"col-sm-6\">\n        <p>\n          Status : {{ logstatus }} <br />\n          Available space : {{ Math.trunc(variousData.diskSpace) }} Mo <br />\n          Transfer Status: {{ logtransfer }}\n        </p>\n      </div>\n      <div>\n        <b-alert show :variant=\"alertcolor\">{{ alertLog }}</b-alert>\n      </div>\n    </div>\n\n    <b-modal id=\"fcu-parameters-modal\" title=\"FCU Parameters\">\n      <p class=\"my-4\">Select sub-system</p>\n      <b-form-select v-model=\"selected\" :options=\"modules\"></b-form-select>\n      <b-form-select\n          v-if=\"submodules\"\n          v-model=\"subselected\"\n          :options=\"submodules\"\n      ></b-form-select>\n      <b-form-select\n          v-if=\"subsubmodules\"\n          v-model=\"subsubselected\"\n          :options=\"subsubmodules\"\n      ></b-form-select>\n      <div v-if=\"parameter\">\n        <ul>\n          <li v-for=\"(item, key) in parameter\">{{ key }} : {{ item }}</li>\n        </ul>\n        <b-form-input\n            v-model=\"parameter['value']\"\n            placeholder=\"Enter value here\"\n        ></b-form-input>\n        <b-button @click=\"sendToFcu\" variant=\"info\">Send</b-button>\n      </div>\n    </b-modal>\n\n    <b-modal id=\"maxon-modal\" title=\"Config MAXON motor\">\n      <div class=\"row\">\n        <div class=\"col-sm-6 mb-3\">\n          <p class=\"mb-1\">NMT operation</p>\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"startNmt\" variant=\"success\">Start</b-button>\n            <b-button @click=\"stopNmt\" variant=\"danger\">Stop</b-button>\n          </b-button-group>\n        </div>\n\n        <div class=\"col-sm-6\">\n          <p class=\"mb-1\">FCU Calibration</p>\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"requestCalibration(true)\" variant=\"success\"\n            >Activate</b-button\n            >\n            <b-button @click=\"requestCalibration(false)\" variant=\"danger\"\n            >Disable</b-button\n            >\n          </b-button-group>\n        </div>\n      </div>\n      <b-tabs content-class=\"mt-3\">\n        <b-tab @click=\"setActiveFoil('back')\" title=\"Rear foil\" active></b-tab>\n        <b-tab @click=\"setActiveFoil('main')\" title=\"Main foil\"></b-tab>\n        <b-tab @click=\"setActiveFoil('lateral')\" title=\"Lateral foil\"></b-tab>\n        <b-tab @click=\"setActiveFoil('lateral')\" title=\"Benito\"></b-tab>\n      </b-tabs>\n      <div class=\"row\">\n        <div class=\"col-sm-6\">\n          <p class=\"mt-2 mb-1\">Maxon operation</p>\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"maxonReady\" variant=\"info\">Activate</b-button>\n            <b-button @click=\"maxonStartOp\" variant=\"success\">Enable</b-button>\n            <b-button @click=\"maxonStartOpNow\" variant=\"warning\"\n            >Start</b-button\n            >\n          </b-button-group>\n\n          <b-button-group class=\"d-flex mt-2\">\n            <b-button @click=\"maxonDisable\" variant=\"danger\">Stop</b-button>\n          </b-button-group>\n\n          <p class=\"mt-2 mb-1\">Maxon mode</p>\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"maxonSetPPM\" variant=\"info\">PPM</b-button>\n            <b-button @click=\"maxonSetHoming\" variant=\"info\">Homing</b-button>\n          </b-button-group>\n\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"maxonClearError\" variant=\"danger\"\n            >Clear error</b-button\n            >\n          </b-button-group>\n\n          <p class=\"mt-2 mb-1\">Homing</p>\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"homingMaxon\" variant=\"danger\"\n            >Start Homing</b-button\n            >\n            <!-------------------------------------------------------------------------->\n          </b-button-group>\n          <p class=\"mt-2 mb-1\">PID Config</p>\n          <b-button-group class=\"d-flex\">\n            <b-button v-b-modal.pid-modal>PID</b-button>\n          </b-button-group>\n        </div>\n        <div class=\"col-sm-6\">\n          <p>\n            Operating mode : {{ maxonOpMode }} <br />\n            Motor : {{ maxonEnStatus }}<br />\n            Error code : {{ activeMaxonMotorObject.error_code }}<br />\n            Homing : {{ globalState }}<br />\n            <br />\n            Current demand :\n            {{ activeMaxonMotorObject.current_demand_value }} mA<br />\n            Velocity demand :\n            {{ activeMaxonMotorObject.velocity_demand_value }} rpm<br />\n            Position demand :\n            {{ activeMaxonMotorObject.position_demand_value }} inc<br />\n            Position actual :\n            {{ activeMaxonMotorObject.position_actual_value }} inc\n          </p>\n        </div>\n      </div>\n    </b-modal>\n\n    <b-modal id=\"battery-modal\" title=\"Configure battery\">\n      <div class=\"row\">\n        <div class=\"col-sm-5\">\n          <p class=\"mb-1\">High Power Load</p>\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"battLoad(true)\" variant=\"success\">ON</b-button>\n            <b-button @click=\"battLoad(false)\" variant=\"danger\">OFF</b-button>\n          </b-button-group>\n\n          <p class=\"mt-2 mb-1\">High Power PV</p>\n          <b-button-group class=\"d-flex\">\n            <b-button @click=\"pvState(true)\" variant=\"success\">ON</b-button>\n            <b-button @click=\"pvState(false)\" variant=\"danger\">OFF</b-button>\n          </b-button-group>\n\n          <p class=\"mt-2 mb-1\">Fan Speed</p>\n          <b-button-group class=\"d-flex\">\n            <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"30\"\n                v-model=\"fanSpeed\"\n            />\n            <b-button @click=\"setFanSpeed()\" variant=\"info\">Set</b-button>\n          </b-button-group>\n        </div>\n      </div>\n    </b-modal>\n\n    <b-modal id=\"pid-modal\" title=\"Configure MAXON PID\">\n      <div class=\"row\">\n        <div class=\"col-sm-5\">\n          <p class=\"mt-2 mb-1\">PID values</p>\n          <b-button-group class=\"d-flex\">\n            <label class=\"mt-2 mb-1 mr-2\">P: </label>\n            <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"30\"\n                v-model=\"kp_maxon\"\n            />\n          </b-button-group>\n          <b-button-group class=\"d-flex\">\n            <label class=\"mt-2 mb-1 mr-2\">I: </label>\n            <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"30\"\n                v-model=\"ki_maxon\"\n            />\n          </b-button-group>\n          <b-button-group class=\"d-flex\">\n            <label class=\"mt-2 mb-1 mr-2\">D: </label>\n            <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"30\"\n                v-model=\"kd_maxon\"\n            />\n          </b-button-group>\n          <!-- <b-button @click=\"setKiKpValue()\" variant=\"info\"\n            >Update params</b-button\n          > -->\n        </div>\n      </div>\n    </b-modal>\n\n    <b-modal id=\"configuration-modal\" title=\"Configuration\">\n      <!-- <p class=\"mb-1\">Change Roll</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"roll(0)\" variant=\"warning\">Left</b-button>\n        <b-button @click=\"roll(1)\" variant=\"info\">Forward</b-button>\n        <b-button @click=\"roll(2)\" variant=\"warning\">Right</b-button>\n      </b-button-group>\n      <p class=\"mb-1\">Tuning</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(0)\" variant=\"info\">Roll</b-button>\n        <b-button @click=\"tuning(1)\" variant=\"success\">Altitude</b-button>\n        <b-button @click=\"tuning(2)\" variant=\"primary\">Pitch</b-button>\n      </b-button-group> -->\n      <!-- <p class=\"mb-1\">Strategie</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(3)\" variant=\"info\">Hystérèse</b-button>\n        <b-button @click=\"tuning(4)\" variant=\"success\">Manual angle</b-button>\n        <b-button @click=\"tuning(10)\" variant=\"primary\">No Selection</b-button>\n      </b-button-group> -->\n      <p class=\"mb-1\">Tuning selector 0: All disable</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(0)\" variant=\"danger\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 1: Joystick</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(1)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 2: Pot_2_: height</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(2)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 3: Pot_2: height + Joystick</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(3)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 4: Pot_2 : Pitch</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(4)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 5: Pot_2: Pitch + Joystick</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(5)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning selector 6: Roll only</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(6)\" variant=\"danger\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 7: Roll + Joystick</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(7)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 8: Roll + pot_2: height</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(8)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 9: Roll + Pot_2: height + Joystick</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(9)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 10: Roll + Pot_2 : Pitch</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(10)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n\n      <p class=\"mb-1\">Tuning Selector 11: Roll + Pot_2: pitch + Joystick</p>\n      <b-button-group class=\"d-flex\">\n        <b-button @click=\"tuning(11)\" variant=\"primary\">Select</b-button>\n      </b-button-group>\n    </b-modal>\n\n    <b-modal\n        size=\"lg\"\n        id=\"fcu-parameters-sel-modal\"\n        title=\"FCU Parameters selected\"\n    >\n      <div>\n        <div class=\"row my-1\" v-for=\"parameter in fcuParametersList\">\n          <b-col sm=\"5\">\n            <label>{{ parameter.longName }}:</label>\n          </b-col>\n          <b-col sm=\"2\">\n            <b-form-input\n                v-model=\"parameter.value\"\n                :id=\"`param-${parameter.index}`\"\n                type=\"text\"\n            ></b-form-input>\n          </b-col>\n          <b-col sm=\"3\">\n            <span v-if=\"'value' in parameter\">{{ parameter.value }}</span> -\n            <span v-if=\"'recvValue' in parameter\">{{\n                parameter.recvValue\n              }}</span>\n          </b-col>\n          <b-col sm=\"2\">\n            <b-button-group>\n              <b-button @click=\"setValue(parameter.index)\" variant=\"success\"\n              >Set</b-button\n              >\n              <b-button @click=\"getValue(parameter.index)\" variant=\"info\"\n              >Get</b-button\n              >\n            </b-button-group>\n          </b-col>\n        </div>\n      </div>\n      <b-button @click=\"saveParam\" variant=\"warning\">Save</b-button>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport {ref} from \"vue\";\n\nexport default {\n  name: \"Ctrl_panel\",\n  props: ['canUpdate'],\n  emits: ['subscribeToFields', 'updateData'],\n\n  setup(props, {emit}) {\n    let dataObject = ref({})\n    let initialized = ref(false)\n\n    let requiredFields = {\n    }\n\n    emit(\"subscribeToFields\", requiredFields)\n\n    setInterval( ()=>{\n      if (props.canUpdate) {\n        emit(\"updateData\", requiredFields, dataObject)\n        if(!initialized.value) initialized.value = true\n      }\n    } , 1000)\n\n    return {dataObject, initialized}\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}